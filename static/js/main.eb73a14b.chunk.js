(this.webpackJsonpreach=this.webpackJsonpreach||[]).push([[0],{129:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){},132:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(36),c=a.n(s),o=(a(74),a(35)),i=a(63),l=a(64),u=a(65),d=a(5),m=a(6),h=a(8),p=a(7),v=a(9),f=a(25),g=a(26),E=a(15),k=a.n(E),_=a(14),C=function(){function e(){Object(d.a)(this,e)}return Object(m.a)(e,null,[{key:"buildRequestUrl",value:function(e){return"http://localhost:3001"+e}},{key:"preparingRequest",value:function(e,t,a){switch(e){case"new":return{uriPattern:"/".concat(a),method:"POST"};case"edit":return{uriPattern:"/".concat(a,"/").concat(t),method:"PATCH"};default:return null}}},{key:"dateRangeStart",value:function(){return k()(new Date).subtract(2,"weeks").startOf("days")}},{key:"dateRangeEnd",value:function(){return k()("2020/4/1","YYYY/MM/DD")}}]),e}(),b=(a(81),function(e){return e.errors.map((function(e){return n.a.createElement("div",{className:"error__message",key:e.error},e.error)}))}),N=function(e){var t=e.action,a=e.errors,r="".concat(t," failed!");return n.a.createElement("div",{className:"error"},n.a.createElement("div",{className:"error__title"},r),n.a.createElement(b,{errors:a}))},y=(a(59),function(e){function t(e){var a;Object(d.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).editProjectFormValue=function(){var e=a.props.id,t=C.buildRequestUrl("/projects/".concat(e,"/edit"));fetch(t,{method:"GET",headers:{"X-Reach-token":a.token}}).then((function(e){return e.json()})).then((function(e){var t=e.is_authenticated,r=e.project;if(t){var n=r.name,s=r.description;a.setState({name:n,description:s})}})).catch((function(){}))},a.handleCreate=function(){var e=a.state,t=e.name,r=e.description,n=a.props.id,s=C.preparingRequest(a.action,n,"projects");if(null!==s){var c=C.buildRequestUrl(s.uriPattern),o={name:t,description:r};fetch(c,{method:s.method,headers:{"Content-Type":"application/json","X-Reach-token":a.token},body:JSON.stringify(o)}).then((function(e){return e.json()})).then((function(e){var t=e.is_created,r=e.errors,n=e.project,s=a.props,c=s.closeModal,o=s.refresh;t&&"new"===a.action?(o(n),c()):t&&"edit"===a.action?(o(n.name),c()):a.setState({errors:r})})).catch((function(){}))}},a.onChangeName=function(e){var t=e.target.value;a.setState({name:t})},a.onChangeDescription=function(e){var t=e.target.value;a.setState({description:t})},a.onClickOverlay=function(e){e.stopPropagation()},a.token=localStorage.getItem("token");var r=a.props.action;return a.action=r,a.state={name:"",description:"",errors:[]},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){"edit"===this.action&&this.editProjectFormValue()}},{key:"render",value:function(){var e=this.props.closeModal,t=this.state,a=t.name,r=t.description,s=t.errors,c="new"===this.action?"Create ":"Update ";return n.a.createElement("div",{className:"modalOverlay",onClick:e},n.a.createElement("div",{className:"modalForm",onClick:this.onClickOverlay},n.a.createElement("div",{className:"modalForm__title"},c,"Project"),0!==s.length&&n.a.createElement(N,{action:"Project creation",errors:s}),n.a.createElement("input",{type:"text",className:"modalForm__textInput",placeholder:"Type a project name",value:a,onChange:this.onChangeName}),n.a.createElement("textarea",{className:"modalForm__textarea",placeholder:"Type a project description",value:r,onChange:this.onChangeDescription}),n.a.createElement("button",{type:"button",onClick:this.handleCreate,className:"modalForm__button"},c)))}}]),t}(r.PureComponent)),w=a(3),j=a.n(w),S=a(12),D=function(e){function t(e){var a;Object(d.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).getIndexColors=function(){var e=C.buildRequestUrl("/colors");fetch(e,{method:"GET",headers:{"X-Reach-token":a.token}}).then((function(e){return e.json()})).then((function(e){var t=e.is_authenticated,r=e.colors;t&&a.setState({colors:r})})).catch((function(){}))},a.editResourceFormValue=function(){var e=a.props.id,t=C.buildRequestUrl("/resources/".concat(e,"/edit"));fetch(t,{method:"GET",headers:{"X-Reach-token":a.token}}).then((function(e){return e.json()})).then((function(e){var t=e.is_authenticated,r=e.resource;t&&a.setState({name:r.name,pickedColor:String(r.color_id)})})).catch((function(){}))},a.handleCreate=function(){var e=a.props,t=e.closeModal,r=e.refresh,n=a.state,s=n.pickedColor,c=n.name,o=a.props.id,i=C.preparingRequest(a.action,o,"resources");if(null!==i){var l=C.buildRequestUrl(i.uriPattern),u={name:c,color_id:s};fetch(l,{method:i.method,headers:{"Content-Type":"application/json","X-Reach-token":a.token},body:JSON.stringify(u)}).then((function(e){return e.json()})).then((function(e){var n=e.errors,s=e.is_created,c=e.resource;s&&"new"===a.action?(r(c),t()):s&&"edit"===a.action?(r(),t()):a.setState({errors:n})})).catch((function(){}))}},a.onPickColor=function(e){var t=e.target.dataset.color;a.setState({pickedColor:t})},a.onChangeName=function(e){var t=e.target.value;a.setState({name:t})},a.onClickOverlay=function(e){e.stopPropagation()};var r=a.props.action;return a.action=r,a.state={name:"",colors:[],pickedColor:"",errors:[]},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(S.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem("token");case 2:this.token=e.sent,this.getIndexColors(),"edit"===this.action&&this.editResourceFormValue();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e="new"===this.action?"Create ":"Update ",t=this.props.closeModal,a=this.state,r=a.name,s=a.colors,c=a.pickedColor,o=a.errors;return n.a.createElement("div",{className:"modalOverlay",onClick:t},n.a.createElement("div",{className:"modalForm",onClick:this.onClickOverlay},n.a.createElement("div",{className:"modalForm__title"},e,"Resource"),0!==o.length&&n.a.createElement(N,{action:"Resource creation",errors:o}),n.a.createElement("input",{type:"text",className:"modalForm__textInput",placeholder:"Type a resource name",value:r,onChange:this.onChangeName}),n.a.createElement("div",{className:"modalForm__label"},"Chart color"),n.a.createElement("div",{className:"colorPallet"},n.a.createElement(O,{colors:s,pickedColor:c,onPickColor:this.onPickColor})),n.a.createElement("button",{type:"button",onClick:this.handleCreate,className:"modalForm__button"},e)))}}]),t}(r.PureComponent),O=function(e){var t=e.colors,a=e.pickedColor,r=e.onPickColor;return t.map((function(e){var t=a===String(e.id)?"--selected":"",s="colorPallet__body".concat(t);return n.a.createElement("div",{key:e.id,className:"colorPallet__edge"},n.a.createElement("div",{className:s,style:{backgroundColor:e.value},"data-color":e.id,onClick:r}))}))},R=(a(47),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).getCurrentAccount=function(){var e=C.buildRequestUrl("/users/edit");fetch(e,{method:"GET",headers:{"X-Reach-token":a.token}}).then((function(e){return e.json()})).then((function(e){var t=e.is_authenticated,r=e.user;if(t){var n=r.avatar,s=r.name,c=r.email;a.avatar=n,a.name=s,a.email=c,a.setState({uri:n,name:s,email:c})}})).catch((function(){}))},a.handleUpdate=function(){var e=a.state,t=e.avatar,r=e.name,n=e.email,s=new FormData;s.append("user[name]",r),s.append("user[email]",n),t&&s.append("user[avatar]",t);var c=C.buildRequestUrl("/users/update");fetch(c,{method:"PATCH",headers:{"X-Reach-token":a.token},body:s}).then((function(e){return e.json()})).then((function(e){var t=e.is_updated,r=e.errors;t?(0,a.props.refresh)():a.setState({errors:r})})).catch((function(){}))},a.onChangeFile=function(e){var t=e.target.files[0],r=URL.createObjectURL(t);a.setState({uri:r,avatar:t})},a.onChangeName=function(e){var t=e.target.value;a.setState({name:t})},a.onChangeEmail=function(e){var t=e.target.value;a.setState({email:t})},a.closeEditAccount=function(){(0,a.props.closeEditAccount)()},a.onClickOverlay=function(e){return e.stopPropagation()},a.state={uri:"",avatar:null,name:"",email:"",errors:[]},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.token=localStorage.getItem("token"),this.getCurrentAccount()}},{key:"render",value:function(){var e=this.state,t=e.uri,a=e.name,r=e.email,s=e.errors;return n.a.createElement("div",{className:"background--edit",onClick:this.closeEditAccount},n.a.createElement("div",{className:"session",onClick:this.onClickOverlay},n.a.createElement("div",{className:"session__title"},"Edit account"),0!==s.length&&n.a.createElement(N,{action:"Registration",errors:s}),n.a.createElement("label",{htmlFor:"avatarForm",className:"session__avatar"},n.a.createElement("input",{id:"avatarForm",type:"file",className:"session__fileField",onChange:this.onChangeFile}),""===t?n.a.createElement(_.a,{icon:["fas","user"],className:"session__fileIcon"}):n.a.createElement("img",{src:t,alt:"avatar",className:"session__preview"})),n.a.createElement("div",{className:"session__fileLabel"},"Upload your avatar"),n.a.createElement("input",{type:"text",className:"session__name",placeholder:"Name",value:a,onChange:this.onChangeName}),n.a.createElement("input",{type:"text",className:"session__email",placeholder:"Email",value:r,onChange:this.onChangeEmail}),n.a.createElement("button",{type:"button",onClick:this.handleUpdate,className:"session__submit"},"Update")))}}]),t}(r.Component)),x=(a(83),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).openProjectForm=function(){return a.setState({projectFormVisible:!0})},a.closeProjectForm=function(){return a.setState({projectFormVisible:!1})},a.openResourceForm=function(){return a.setState({resourceFormVisible:!0})},a.closeResourceForm=function(){return a.setState({resourceFormVisible:!1})},a.openEditAccount=function(){return a.setState({editAccuountVisible:!0})},a.closeEditAccount=function(){return a.setState({editAccuountVisible:!1})},a.toggleAccountMenu=function(){var e=a.state.accountMenuVisible;a.setState({accountMenuVisible:!e})},a.changeMode=function(){(0,a.props.changeMode)()},a.signOut=function(){localStorage.removeItem("token"),a.setState({isSignOut:!0})},a.state={projectFormVisible:!1,resourceFormVisible:!1,accountMenuVisible:!1,editAccuountVisible:!1,isSignOut:!1},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.refreshProject,a=e.getProjectIndex,r=e.refreshResource,s=this.state,c=s.projectFormVisible,o=s.resourceFormVisible,i=s.accountMenuVisible,l=s.editAccuountVisible;return s.isSignOut?n.a.createElement(f.a,{to:"/reach/signin"}):n.a.createElement("div",{className:"sidebar"},n.a.createElement("div",{className:"sidebar__iconWrapper--plus",onClick:this.openProjectForm},n.a.createElement(_.a,{icon:["fas","plus"],className:"sidebar__icon"})),n.a.createElement("div",{className:"sidebar__iconWrapper--minus",onClick:this.changeMode},n.a.createElement(_.a,{icon:["fas","minus"],className:"sidebar__icon"})),n.a.createElement("div",{className:"sidebar__iconWrapper--resource",onClick:this.openResourceForm},n.a.createElement(_.a,{icon:["fas","tags"],className:"sidebar__icon"})),n.a.createElement("div",{className:"sidebar__iconWrapper--account",onClick:this.toggleAccountMenu},n.a.createElement(_.a,{icon:["fas","user"],className:"sidebar__icon"})),i&&n.a.createElement("div",{className:"overlay",onClick:this.toggleAccountMenu},n.a.createElement("div",{className:"accountMenu"},n.a.createElement("div",{className:"accountMenu__edit",onClick:this.openEditAccount},"Edit account"),n.a.createElement("div",{className:"accountMenu__signout",onClick:this.signOut},"Sign out"))),c&&n.a.createElement(y,{action:"new",refresh:t,closeModal:this.closeProjectForm}),o&&n.a.createElement(D,{action:"new",refresh:r,closeModal:this.closeResourceForm}),l&&n.a.createElement(R,{refresh:a,closeEditAccount:this.closeEditAccount}))}}]),t}(r.PureComponent)),F=a(32),M=a.n(F),P=(a(61),-1),T=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).getUserIndex=function(){var e=C.buildRequestUrl("/users");fetch(e,{method:"GET",headers:{"X-Reach-token":a.token}}).then((function(e){return e.json()})).then((function(e){var t=e.users;e.is_authenticated&&a.setState({users:t})})).catch((function(){}))},a.search=function(){var e=a.state,t=e.projectId,r=e.taskName,n=e.startDateFrom,s=e.startDateTo,c=e.endDateFrom,o=e.endDateTo,i=e.extendFrom,l=e.extendTo,u=e.orderDuration,d=e.orderStartDate,m=e.orderEndDate,h=e.orderExtend,p=e.inCharge,v=e.selectedResources,f=C.buildRequestUrl("/tasks/search"),g={project_id:t,task_name:r,start_date:{from:n,to:s,order:d},end_date:{from:c,to:o,order:m},extend:{from:i,to:l,order:h},duration:{order:u},in_charge:p,resources:v};fetch(f,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)}).then((function(e){return e.json()})).then((function(e){var t=e.projects;(0,a.props.updateProject)(t)})).catch((function(){}))},a.sortingByDateRange=function(e){var t=a.state,r=t.startDateFrom,n=t.startDateTo,s=t.endDateFrom,c=t.endDateTo,o=t.extendFrom,i=t.extendTo,l=t.orderStartDate,u=t.orderEndDate,d=t.orderExtend;switch(e){case"start":return{rangeStart:r,rangeEnd:n,onChangeRangeStart:a.onChangeStartDateRangeS,onChangeRangeEnd:a.onChangeStartDateRangeE,order:l};case"end":return{rangeStart:s,rangeEnd:c,onChangeRangeStart:a.onChangeEndDateRangeS,onChangeRangeEnd:a.onChangeEndDateRangeE,order:u};case"extend":return{rangeStart:o,rangeEnd:i,onChangeRangeStart:a.onChangeExtendRangeS,onChangeRangeEnd:a.onChangeExtendRangeE,order:d};default:return{}}},a.onClickResource=function(){var e=a.state.searchByResourceVisible;a.setState({searchByResourceVisible:!e})},a.onClickName=function(){var e=a.state.searchByNameVisible;a.setState({searchByNameVisible:!e})},a.onClickDate=function(e){var t=e.currentTarget.dataset.type,r=a.state.searchByDateVisible;a.setState({searchByDateVisible:!r,dateType:t})},a.onClickDuration=function(){var e=a.state.searchByDurationVisible;a.setState({searchByDurationVisible:!e})},a.onClickInCharge=function(){var e=a.state.searchByUsersVisible;a.setState({searchByUsersVisible:!e})},a.onChangeOrder=function(){var e=Object(S.a)(j.a.mark((function e(t){var r,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.currentTarget.dataset.by,n=t.target.value,e.t0=r,e.next="duration"===e.t0?5:"start"===e.t0?8:"end"===e.t0?11:"extend"===e.t0?14:17;break;case 5:return e.next=7,a.setState({orderDuration:n,orderStartDate:"",orderEndDate:"",orderExtend:""});case 7:return e.abrupt("break",17);case 8:return e.next=10,a.setState({orderDuration:"",orderStartDate:n,orderEndDate:"",orderExtend:""});case 10:return e.abrupt("break",17);case 11:return e.next=13,a.setState({orderDuration:"",orderStartDate:"",orderEndDate:n,orderExtend:""});case 13:return e.abrupt("break",17);case 14:return e.next=16,a.setState({orderDuration:"",orderStartDate:"",orderEndDate:"",orderExtend:n});case 16:return e.abrupt("break",17);case 17:a.search();case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onChangeProject=function(){var e=Object(S.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.target.value,e.next=3,a.setState({projectId:r});case 3:a.search();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onChangeTask=function(){var e=Object(S.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.target.value,e.next=3,a.setState({taskName:r});case 3:a.search();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onChangeStartDateRangeS=function(){var e=Object(S.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({startDateFrom:t});case 2:a.search();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onChangeStartDateRangeE=function(){var e=Object(S.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({startDateTo:t});case 2:a.search();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onChangeEndDateRangeS=function(){var e=Object(S.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({endDateFrom:t});case 2:a.search();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onChangeEndDateRangeE=function(){var e=Object(S.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({endDateTo:t}),a.search();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onChangeExtendRangeS=function(){var e=Object(S.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({extendFrom:t});case 2:a.search();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onChangeExtendRangeE=function(){var e=Object(S.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({extendTo:t});case 2:a.search();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onClickAvatar=function(){var e=Object(S.a)(j.a.mark((function e(t){var r,n,s,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.state.inCharge,n=r,s=t.currentTarget.dataset.id,(c=r.indexOf(s))===P?n.push(s):n.splice(c,1),e.next=7,a.setState({inCharge:n});case 7:a.search();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onClickResourceIcon=function(){var e=Object(S.a)(j.a.mark((function e(t){var r,n,s,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.state.selectedResources,n=r,s=t.currentTarget.dataset.id,(c=r.indexOf(s))===P?n.push(s):n.splice(c,1),e.next=7,a.setState({selectedResources:n});case 7:a.search();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.clearSearchName=Object(S.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({taskName:"",projectId:"",searchByNameVisible:!1});case 2:a.search();case 3:case"end":return e.stop()}}),e)}))),a.clearSearchStartDate=Object(S.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({startDateFrom:"",startDateTo:"",orderStartDate:"",searchByDateVisible:!1});case 2:a.search();case 3:case"end":return e.stop()}}),e)}))),a.clearSearchEndDate=Object(S.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({endDateFrom:"",endDateTo:"",orderEndDate:"",searchByDateVisible:!1});case 2:a.search();case 3:case"end":return e.stop()}}),e)}))),a.clearSearchExtend=Object(S.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({extendFrom:"",extendTo:"",orderExtend:"",searchByDateVisible:!1});case 2:a.search();case 3:case"end":return e.stop()}}),e)}))),a.clearSearchDuration=Object(S.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({orderDuration:"",searchByDurationVisible:!1});case 2:a.search();case 3:case"end":return e.stop()}}),e)}))),a.clearSearchInCharge=Object(S.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({inCharge:[],searchByUsersVisible:!1});case 2:a.search();case 3:case"end":return e.stop()}}),e)}))),a.closeAllModal=function(){a.setState({searchByNameVisible:!1,searchByDateVisible:!1,searchByDurationVisible:!1,searchByUsersVisible:!1,searchByResourceVisible:!1})},a.stopPropagation=function(e){return e.stopPropagation()},a.token=localStorage.getItem("token"),a.state={users:[],searchByNameVisible:!1,searchByDateVisible:!1,searchByDurationVisible:!1,searchByUsersVisible:!1,searchByResourceVisible:!1,dateType:"",projectId:"",taskName:"",startDateFrom:"",startDateTo:"",endDateFrom:"",endDateTo:"",extendFrom:"",extendTo:"",orderDuration:"",orderStartDate:"",orderEndDate:"",orderExtend:"",inCharge:[],selectedResources:[]},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getUserIndex()}},{key:"render",value:function(){var e=this.props,t=e.projects,a=e.resources,r=this.state,s=r.users,c=r.searchByNameVisible,o=r.searchByDateVisible,i=r.searchByDurationVisible,l=r.searchByUsersVisible,u=r.searchByResourceVisible,d=r.projectId,m=r.taskName,h=r.dateType,p=r.startDateFrom,v=r.startDateTo,f=r.endDateFrom,g=r.endDateTo,E=r.extendFrom,k=r.extendTo,_=r.orderStartDate,C=r.orderEndDate,b=r.orderExtend,N=r.orderDuration,y=r.inCharge,w=r.selectedResources,j=0===w.length?"resourceIcon":"resourceIcon--selected",S=this.sortingByDateRange(h),D=S.rangeStart,O=S.rangeEnd,R=S.onChangeRangeStart,x=S.onChangeRangeEnd,F=S.order;return n.a.createElement("div",{className:"gantt-index-header"},n.a.createElement("div",{className:"gantt-index-header__resource"},n.a.createElement("div",{className:j,onClick:this.onClickResource})),n.a.createElement("div",{className:"gantt-index-header__name"},""===d&&""===m?n.a.createElement("span",{className:"gantt-index-header__label",onClick:this.onClickName},"Name"):n.a.createElement("div",{className:"selected"},n.a.createElement("span",{className:"selected__label",onClick:this.onClickName},"Name"),n.a.createElement("span",{className:"selected__clear",onClick:this.clearSearchName},"\xd7"))),n.a.createElement("div",{className:"gantt-index-header__startDate"},""===p&&""===v&&""===_?n.a.createElement("span",{className:"gantt-index-header__label","data-type":"start",onClick:this.onClickDate},"StartDate"):n.a.createElement("div",{className:"selected"},n.a.createElement("span",{className:"selected__label","data-type":"start",onClick:this.onClickDate},"StartDate"),n.a.createElement("span",{className:"selected__clear",onClick:this.clearSearchStartDate},"\xd7"))),n.a.createElement("div",{className:"gantt-index-header__endDate"},""===f&&""===g&&""===C?n.a.createElement("span",{className:"gantt-index-header__label","data-type":"end",onClick:this.onClickDate},"EndDate"):n.a.createElement("div",{className:"selected"},n.a.createElement("span",{className:"selected__label","data-type":"end",onClick:this.onClickDate},"EndDate"),n.a.createElement("span",{className:"selected__clear",onClick:this.clearSearchEndDate},"\xd7"))),n.a.createElement("div",{className:"gantt-index-header__extend"},""===E&&""===k&&""===b?n.a.createElement("span",{className:"gantt-index-header__label","data-type":"extend",onClick:this.onClickDate},"Extend"):n.a.createElement("div",{className:"selected"},n.a.createElement("span",{className:"selected__label","data-type":"extend",onClick:this.onClickDate},"Extend"),n.a.createElement("span",{className:"selected__clear",onClick:this.clearSearchExtend},"\xd7"))),n.a.createElement("div",{className:"gantt-index-header__duration"},""===N?n.a.createElement("span",{className:"gantt-index-header__label",onClick:this.onClickDuration},"Duration"):n.a.createElement("div",{className:"selected"},n.a.createElement("span",{className:"selected__label",onClick:this.onClickDuration},"Duration"),n.a.createElement("span",{className:"selected__clear",onClick:this.clearSearchDuration},"\xd7"))),n.a.createElement("div",{className:"gantt-index-header__inCharge"},0===y.length?n.a.createElement("span",{className:"gantt-index-header__label",onClick:this.onClickInCharge},"InCharge"):n.a.createElement("div",{className:"selected"},n.a.createElement("span",{className:"selected__label",onClick:this.onClickInCharge},"InCharge"),n.a.createElement("span",{className:"selected__clear",onClick:this.clearSearchInCharge},"\xd7"))),u&&n.a.createElement("div",{className:"overlay",onClick:this.closeAllModal},n.a.createElement(q,{resources:a,selectedResources:w,onClickResource:this.onClickResourceIcon,stopPropagation:this.stopPropagation})),c&&n.a.createElement("div",{className:"overlay",onClick:this.closeAllModal},n.a.createElement(A,{projectId:d,projects:t,onChangeProject:this.onChangeProject,taskName:m,onChangeTask:this.onChangeTask,stopPropagation:this.stopPropagation})),o&&n.a.createElement("div",{className:"overlay",onClick:this.closeAllModal},n.a.createElement(Y,{dateType:h,rangeStart:D,rangeEnd:O,onChangeRangeStart:R,onChangeRangeEnd:x,onChangeOrder:this.onChangeOrder,selected:F,stopPropagation:this.stopPropagation})),i&&n.a.createElement("div",{className:"overlay",onClick:this.closeAllModal},n.a.createElement(I,{onChangeOrder:this.onChangeOrder,selected:N,stopPropagation:this.stopPropagation})),l&&n.a.createElement("div",{className:"overlay",onClick:this.closeAllModal},n.a.createElement(B,{users:s,inCharge:y,onClickAvatar:this.onClickAvatar,stopPropagation:this.stopPropagation})))}}]),t}(r.Component),V=function(e){var t=e.onChangeOrder,a=e.by,r=e.selected;return n.a.createElement("select",{"data-by":a,value:r,onChange:t,className:"search__order"},n.a.createElement("option",{key:"default",value:null,"aria-label":"order"}),[{label:"ASC",value:"ASC"},{label:"DESC",value:"DESC"}].map((function(e){return n.a.createElement("option",{key:e.label,value:e.value},e.label)})))},I=function(e){var t=e.onChangeOrder,a=e.selected,r=e.stopPropagation;return n.a.createElement("div",{className:"search--duration",onClick:r},n.a.createElement("div",{className:"search__label"},"Order by duration"),n.a.createElement(V,{by:"duration",onChangeOrder:t,selected:a}),n.a.createElement("div",{className:"search__divide"}))},Y=function(e){var t=e.rangeStart,a=e.rangeEnd,r=e.onChangeRangeStart,s=e.onChangeRangeEnd,c=e.dateType,o=e.onChangeOrder,i=e.order,l=e.stopPropagation,u="search--".concat(c),d="Filter by ".concat(c," date");return n.a.createElement("div",{className:u,onClick:l},n.a.createElement("div",{className:"search__label"},"Order by duration"),n.a.createElement(V,{by:c,onChangeOrder:o,selected:i}),n.a.createElement("div",{className:"search__divide"}),n.a.createElement("div",{className:"search__label"},d),n.a.createElement("div",{className:"search__dateWrapper"},n.a.createElement(M.a,{className:"search__dateRange",dateFormat:"yyyy/MM/dd",showWeekNumbers:!0,placeholderText:"Select range start",selected:t,onChange:r}),n.a.createElement(M.a,{className:"search__dateRange",dateFormat:"yyyy/MM/dd",showWeekNumbers:!0,placeholderText:"Select range end",selected:a,onChange:s})))},A=function(e){var t=e.projectId,a=e.projects,r=e.onChangeProject,s=e.taskName,c=e.onChangeTask,o=e.stopPropagation;return n.a.createElement("div",{className:"search--name",onClick:o},n.a.createElement("div",{className:"search__label"},"Filter by Project"),n.a.createElement("select",{value:t,onChange:r,className:"search__project"},n.a.createElement("option",{key:"default",value:null,"aria-label":"selectProject"}),a.map((function(e){return n.a.createElement("option",{key:e.name,value:e.id},e.name)}))),n.a.createElement("div",{className:"search__divide"}),n.a.createElement("div",{className:"search__label"},"Search by Task name"),n.a.createElement("input",{type:"text",className:"search__task",value:s,onChange:c}))},U=function(e){var t=e.users,a=e.onClickAvatar,r=e.inCharge;return t.map((function(e){var t=r.indexOf(String(e.id));return n.a.createElement("div",{key:e.id,className:"avatar"},n.a.createElement("div",{"data-id":e.id,onClick:a,className:"avatar__wrapper"},n.a.createElement("img",{src:e.avatar,alt:e.name,className:"avatar__image"}),t!==P&&n.a.createElement("div",{className:"avatar__selected"})),n.a.createElement("div",{className:"avatar__name"},e.name))}))},B=function(e){var t=e.users,a=e.inCharge,r=e.onClickAvatar,s=e.stopPropagation;return n.a.createElement("div",{className:"search--user",onClick:s},n.a.createElement("div",{className:"search__label"},"Search by users"),n.a.createElement("div",{className:"search__usersWrapper"},n.a.createElement(U,{users:t,inCharge:a,onClickAvatar:r})))},W=function(e){var t=e.resources,a=e.selectedResources,r=e.onClickResource;return t.map((function(e){var t=a.indexOf(String(e.id));return n.a.createElement("div",{key:e.id,className:"resource"},n.a.createElement("div",{"data-id":e.id,onClick:r,className:"resource__wrapper"},n.a.createElement("div",{className:"resource__icon",style:{backgroundColor:e.color}}),t!==P&&n.a.createElement("div",{className:"resource__selected"})),n.a.createElement("div",{className:"resource__name"},e.name))}))},q=function(e){var t=e.resources,a=e.selectedResources,r=e.onClickResource,s=e.stopPropagation;return n.a.createElement("div",{className:"search--resource",onClick:s},n.a.createElement("div",{className:"search__label"},"Search by resource"),n.a.createElement("div",{className:"search__resourceWrapper"},n.a.createElement(W,{resources:t,selectedResources:a,onClickResource:r})))},X=(a(129),function(e){var t=e.members;return t.map((function(e,a){return a>3?null:a<3?n.a.createElement("img",{key:e.name,src:e.avatar,alt:e.name,className:"task__avatar"}):n.a.createElement("div",{key:String(a),className:"task__avatar--length"},t.length)}))}),H=function(e){function t(){var e,a;Object(d.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).handleDestroy=function(e){e.stopPropagation(),a.token=localStorage.getItem("token");var t=e.currentTarget.dataset.id,r=C.buildRequestUrl("/tasks/".concat(t));fetch(r,{method:"DELETE",headers:{"X-Reach-token":a.token}}).then((function(e){return e.json()})).then((function(e){var t=e.is_delete,r=e.task;if(t){var n=a.props,s=n.index;(0,n.refresh)(r,s,"destroy")}})).catch((function(){}))},a.onClickOverlay=function(e){e.stopPropagation()},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.tasks,r=t.onClick,s=t.destroyMode;return a.map((function(t){var a="progress"===t.percentComplete?"task":"task--complete";return n.a.createElement("div",{key:t.id,"data-action":"edit","data-id":t.id,className:a,onClick:r},n.a.createElement("div",{className:"task__icon",onClick:e.onClickOverlay},s?n.a.createElement(_.a,{"data-id":t.id,icon:["fas","minus-circle"],className:"task__delete",onClick:e.handleDestroy}):n.a.createElement("div",{className:"task__resource",style:{backgroundColor:t.resource.color}})),n.a.createElement("div",{className:"task__name"},t.name),n.a.createElement("div",{className:"task__startDate"},t.startDate),n.a.createElement("div",{className:"task__endDate"},t.endDate),n.a.createElement("div",{className:"task__extend"},t.extend),n.a.createElement("div",{className:"task__duration"},t.duration),n.a.createElement("div",{className:"task__inCharge"},n.a.createElement(X,{members:t.users})))}))}}]),t}(r.Component),L=-1,G=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).getTaskFormValue=function(){a.token=localStorage.getItem("token");var e=C.buildRequestUrl("/tasks/new");fetch(e,{method:"GET",headers:{"X-Reach-token":a.token}}).then((function(e){return e.json()})).then((function(e){var t=e.is_authenticated,r=e.resources,n=e.users;t&&a.setState({resources:r,users:n})})).catch((function(){}))},a.editTaskFormValue=function(e){a.token=localStorage.getItem("token");var t=C.buildRequestUrl("/tasks/".concat(e,"/edit"));fetch(t,{method:"GET",headers:{"X-Reach-token":a.token}}).then((function(e){return e.json()})).then((function(e){var t=e.is_authenticated,r=e.resources,n=e.users;if(t){var s=e.task,c=s.description,o=s.startDate,i=s.endDate,l=s.extend,u=s.name,d=s.percentComplete,m=s.userIds,h=s.resourceId,p="complete"===d,v=m.map((function(e){return String(e)}));a.setState({resources:r,users:n,name:u,complete:p,description:c,startDate:new Date(o),endDate:l?new Date(l):new Date(i),inCharge:v,resource:h})}})).catch((function(){}))},a.onChangeName=function(e){var t=e.target.value;a.setState({name:t})},a.onChangeResource=function(e){var t=e.target.value;a.setState({resource:t})},a.onChangeStartDate=function(e){a.setState({startDate:e})},a.onChangeEndDate=function(e){a.setState({endDate:e})},a.onCheck=function(){var e=a.state.complete;a.setState({complete:!e})},a.onClickAvatar=function(e){var t=a.state.inCharge,r=t,n=e.currentTarget.dataset.id,s=t.indexOf(n);s===L?r.push(n):r.splice(s,1),a.setState({inCharge:r})},a.onChangeDescription=function(e){var t=e.target.value;a.setState({description:t})},a.createTask=function(){var e=a.props,t=e.id,r=e.taskID,n=e.action,s=a.state,c=s.name,o=s.resource,i=s.startDate,l=s.endDate,u=s.complete,d=s.inCharge,m=s.description,h=C.preparingRequest(n,r,"tasks");if(null!==h){var p=C.buildRequestUrl(h.uriPattern),v={name:c,description:m,duration:k()(l).diff(k()(i),"days"),percent_complete:u?"complete":"progress",resource_id:o,project_id:t,start_date:i,end_date:l,user_ids:d};"edit"===n&&(v.extend=l,delete v.end_date),fetch(p,{method:h.method,headers:{"X-Reach-token":a.token,"Content-Type":"application/json"},body:JSON.stringify(v)}).then((function(e){return e.json()})).then((function(e){var t=e.is_created,r=e.errors,s=e.task;if(t){var c=a.props;(0,c.refresh)(s,c.index,n),a.setState({errors:[]})}else a.setState({errors:r})})).catch((function(){}))}},a.state={resources:[],users:[],name:"",resource:"",startDate:null,endDate:null,complete:!1,inCharge:[],description:"",errors:[]},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.taskID,a=e.action;"new"===a?this.getTaskFormValue():"edit"===a&&this.editTaskFormValue(t)}},{key:"render",value:function(){var e=this.props,t=e.closeModal,a=e.action,r="edit"===a?"Update":"Add",s=this.state,c=s.users,o=s.resources,i=s.resource,l=s.name,u=s.startDate,d=s.endDate,m=s.complete,h=s.inCharge,p=s.description,v=s.errors;return n.a.createElement("div",{className:"taskForm"},n.a.createElement("div",{className:"taskForm__close",onClick:t},"\xd7"),n.a.createElement("div",{className:"taskForm__title"},r,"Task"),0!==v.length&&n.a.createElement(N,{action:"Task creation",errors:v}),n.a.createElement("div",{className:"taskFormRow"},n.a.createElement("div",{className:"taskFormRow__label"},"Name"),n.a.createElement("input",{type:"text",className:"taskFormRow__name",value:l,onChange:this.onChangeName})),n.a.createElement("div",{className:"taskFormRow"},n.a.createElement("div",{className:"taskFormRow__label"},"Resource"),n.a.createElement("select",{value:i,onChange:this.onChangeResource,className:"taskFormRow__resource"},n.a.createElement("option",{key:"default",value:null,"aria-label":"...select"}),n.a.createElement(J,{resources:o})),n.a.createElement("div",{className:"taskFormRow__divide"})),n.a.createElement("div",{className:"taskFormRow"},n.a.createElement("div",{className:"taskFormRow__label"},"Start date"),n.a.createElement(M.a,{className:"taskFormRow__date",dateFormat:"yyyy/MM/dd",showWeekNumbers:!0,selected:u,onChange:this.onChangeStartDate})),n.a.createElement("div",{className:"taskFormRow"},n.a.createElement("div",{className:"taskFormRow__label"},"End date"),n.a.createElement(M.a,{className:"taskFormRow__date",dateFormat:"yyyy/MM/dd",showWeekNumbers:!0,selected:d,onChange:this.onChangeEndDate})),"edit"===a&&n.a.createElement("div",{className:"taskFormRow"},n.a.createElement("div",{className:"taskFormRow__label"},"Complete"),n.a.createElement("div",{className:"taskFormRow__complete",onClick:this.onCheck},n.a.createElement("div",{className:"taskFormRow__checkbox"},n.a.createElement(_.a,{icon:["far","square"]}),m&&n.a.createElement(_.a,{icon:["fas","check"],className:"taskFormRow__checked"})))),n.a.createElement("div",{className:"taskFormRow"},n.a.createElement("div",{className:"taskFormRow__label"},"In charge"),n.a.createElement("div",{className:"taskFormRow__inCharge"},n.a.createElement(K,{users:c,inCharge:h,onClickAvatar:this.onClickAvatar}))),n.a.createElement("div",{className:"taskFormRow"},n.a.createElement("div",{className:"taskFormRow__label"},"Description"),n.a.createElement("textarea",{className:"taskFormRow__description",value:p,onChange:this.onChangeDescription})),n.a.createElement("button",{type:"button",onClick:this.createTask,className:"taskForm__button"},r))}}]),t}(r.Component),J=function(e){return e.resources.map((function(e){return n.a.createElement("option",{key:e.id,value:e.id},e.name)}))},K=function(e){var t=e.users,a=e.onClickAvatar,r=e.inCharge;return t.map((function(e){var t=r.indexOf(String(e.id));return n.a.createElement("div",{key:e.id,className:"avatar"},n.a.createElement("div",{"data-id":e.id,onClick:a,className:"avatar__wrapper"},n.a.createElement("img",{src:e.avatar,alt:e.name,className:"avatar__image"}),t!==L&&n.a.createElement("div",{className:"avatar__selected"})),n.a.createElement("div",{className:"avatar__name"},e.name))}))},$=(a(62),function(e){function t(e){var a;Object(d.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).openModal=function(e){a.id=e.currentTarget.dataset.id||null,a.action=e.currentTarget.dataset.action,a.setState({isVisible:!0})},a.closeModal=function(){return a.setState({isVisible:!1})},a.openProjectForm=function(){return a.setState({projectFormVisible:!0})},a.closeProjectForm=function(){return a.setState({projectFormVisible:!1})},a.updateProject=function(e){return a.setState({name:e})};var r=a.props.project;return a.state={name:r.name,isVisible:!1,projectFormVisible:!1},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.project,a=e.index,r=e.refreshTask,s=e.destroyMode,c=t.tasks,o=t.id,i=this.state,l=i.isVisible,u=i.projectFormVisible,d=i.name;return n.a.createElement("div",{key:d,className:"project"},n.a.createElement("div",{className:"projectHeader"},n.a.createElement("div",{className:"projectHeader__name"},d),n.a.createElement(_.a,{icon:["fas","edit"],className:"projectHeader__edit",onClick:this.openProjectForm}),n.a.createElement(_.a,{icon:["fas","plus"],"data-action":"new",className:"projectHeader__addTask",onClick:this.openModal})),c&&n.a.createElement(H,{destroyMode:s,index:a,refresh:r,tasks:c,onClick:this.openModal}),l&&n.a.createElement(G,{id:o,action:this.action,taskID:this.id,refresh:r,index:a,closeModal:this.closeModal}),u&&n.a.createElement(y,{id:o,refresh:this.updateProject,action:"edit",closeModal:this.closeProjectForm}))}}]),t}(r.Component)),z=function(e){var t=e.projects,a=e.refreshTask,r=e.mode;return t.map((function(e,t){return n.a.createElement($,{refreshTask:a,project:e,key:e.name,index:t,destroyMode:r})}))},Q=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).toggleResourceForm=function(){var e=a.state.resourceFormVisible;a.setState({resourceFormVisible:!e})},a.state={resourceFormVisible:!1},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state.resourceFormVisible,t=this.props,a=t.resource,r=t.refresh;return n.a.createElement("div",{className:"resource__wrapper",onClick:this.toggleResourceForm},n.a.createElement("div",{className:"resource__icon",style:{backgroundColor:a.color}}),n.a.createElement("div",{className:"resource__name"},a.name),e&&n.a.createElement(D,{id:a.id,action:"edit",refresh:r,closeModal:this.toggleResourceForm}))}}]),t}(r.Component),Z=(a(130),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).onMouseEnter=function(e){var t=window.innerWidth<e.clientX+300,r=window.innerHeight<e.clientY+300,n=t?e.clientX-280:e.clientX+30,s=r?e.clientY-150:e.clientY;a.setState({isHover:!0,offsetX:n,offsetY:s})},a.onMouseLeave=function(){a.setState({isHover:!1})},a.state={isHover:!1,offsetX:0,offsetY:0},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.chartWidth,a=e.data,r=this.state,s=r.isHover,c=r.offsetX,o=r.offsetY;return n.a.createElement("div",{style:{width:t,backgroundColor:a.resource.color},className:"chartbar",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},s&&n.a.createElement(te,{data:a,offsetX:c,offsetY:o}))}}]),t}(r.PureComponent)),ee=function(e){return e.users.map((function(e){return n.a.createElement("div",{key:e.name,className:"windowMembers__name"},e.name)}))},te=function(e){var t=e.data,a=e.offsetX,r=e.offsetY;return n.a.createElement("div",{className:"window",style:{top:r,left:a}},n.a.createElement("div",{className:"windowRow"},n.a.createElement("div",{className:"windowRow__label"},"Name:"),n.a.createElement("div",{className:"windowRow__name"},t.name)),n.a.createElement("div",{className:"windowRow"},n.a.createElement("div",{className:"windowRow__label"},"StartDate:"),n.a.createElement("div",{className:"window__startDate"},t.startDate)),n.a.createElement("div",{className:"windowRow"},n.a.createElement("div",{className:"windowRow__label"},"EndDate:"),n.a.createElement("div",{className:"window__endDate"},t.endDate)),n.a.createElement("div",{className:"windowRow"},n.a.createElement("div",{className:"windowRow__label"},"Extend:"),n.a.createElement("div",{className:"window__extend"},t.extend)),n.a.createElement("div",{className:"windowRow"},n.a.createElement("div",{className:"windowRow__label"},"Duration:"),n.a.createElement("div",{className:"window__duration"},t.duration)),n.a.createElement("div",{className:"windowRow"},n.a.createElement("div",{className:"windowRow__label"},"Progress:"),n.a.createElement("div",{className:"window__progress"},t.percentComplete)),n.a.createElement("div",{className:"windowRow"},n.a.createElement("div",{className:"windowRow__label"},"InCharge:"),n.a.createElement("div",{className:"windowMembers"},n.a.createElement(ee,{users:t.users}))),n.a.createElement("div",{className:"windowCol"},n.a.createElement("div",{className:"windowCol__label"},"Description:"),n.a.createElement("div",{className:"windowCol__description"},t.description)))},ae=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).calcOffset=function(e){return(k()(e.startDate,"YYYY/MM/DD").startOf("days").diff(a.start,"days")-3)*a.baseChartWidth},a.calcOffsetForWeeks=function(e){return Math.ceil(k()(e.startDate,"YYYY/MM/DD").startOf("week").diff(a.start,"weeks",!0))*a.baseChartWidth},a.calcChartWidthForWeeks=function(e){var t=e.extend||e.endDate,a=k()(e.startDate,"YYYY/MM/DD").startOf("week"),r=k()(t,"YYYY/MM/DD").endOf("week");return Math.ceil(r.diff(a,"weeks",!0))},a.isBefore=function(e){return k()(e.startDate,"YYYY/MM/DD").isSameOrBefore(a.start)},a.isBeforeForWeek=function(e){return k()(e.startDate,"YYYY/MM/DD").isBefore(a.start.startOf("week"))},a.start=C.dateRangeStart(),a.baseChartWidth=45,a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.scheduleType;return t.tasks.map((function(t){var r="days"===a?e.calcOffset(t):e.calcOffsetForWeeks(t),s="days"===a?t.duration:e.calcChartWidthForWeeks(t);e.isBefore(t)&&"days"===a?s-=Math.ceil(e.start.diff(k()(t.startDate,"YYYY/MM/DD").startOf("days"),"days",!0))+2:e.isBeforeForWeek(t)&&"weeks"===a?s-=Math.ceil(e.start.diff(k()(t.startDate,"YYYY/MM/DD"),"week",!0)):"days"===a&&(s+=1);var c=e.baseChartWidth*s,o="progress"===t.percentComplete?"task":"task--complete";return n.a.createElement("div",{key:t.name,style:{paddingLeft:r},className:o},n.a.createElement(Z,{chartWidth:c,data:t}))}))}}]),t}(r.Component),re=function(e){return e.projects.map((function(t){return n.a.createElement("div",{key:t.name,className:"project"},n.a.createElement("div",{className:"projectHeader"}),t.tasks&&n.a.createElement(ae,{tasks:t.tasks,scheduleType:e.scheduleType}))}))},ne=(a(131),C.dateRangeStart()),se=C.dateRangeEnd(),ce=function(e,t){var a={};if("days"===t)a.formatDate=e.format("MMM D"),a.className="gantt-schedule-header__date".concat(function(e){switch(e.get("day")){case 0:return"--sun";case 6:return"--sat";default:return""}}(e));else{var r=e.startOf("week");a.formatDate="W".concat(e.format("W")," ").concat(r.format("M/D")),a.className="gantt-schedule-header__week"}return a},oe=function(e){for(var t=e.scheduleType,a=[],r=k()(ne);r<=se;r.add(1,t)){var s=ce(r,t);a.push(n.a.createElement("div",{className:s.className,key:r.format("YYYYMMDD")},s.formatDate))}return a},ie=function(e){var t=e.scheduleType,a=e.onClick,r=e.resources,s=e.refreshResource,c={weeks:"switchView__button",days:"switchView__button"};return"weeks"===t?c.weeks+="--disable":"days"===t&&(c.days+="--disable"),n.a.createElement("div",{className:"header"},n.a.createElement("div",{className:"switchView"},n.a.createElement("div",{className:c.weeks,onClick:a,onKeyUp:a,"data-type":"weeks",role:"link",tabIndex:"0"},"Week"),n.a.createElement("div",{className:"switchView__divider"},"|"),n.a.createElement("div",{className:c.days,onClick:a,onKeyUp:a,"data-type":"days",role:"link",tabIndex:"0"},"Day")),n.a.createElement("div",{className:"resource"},r.map((function(e){return n.a.createElement(Q,{refresh:s,key:e.id,resource:e})}))))},le=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).getProjectIndex=function(){var e=C.buildRequestUrl("/projects"),t=localStorage.getItem("token");fetch(e,{method:"GET",headers:{"X-Reach-token":t}}).then((function(e){return e.json()})).then((function(e){var t=e.is_authenticated,r=e.projects,n=e.resources;t&&a.setState({projects:r,resources:n})})).catch((function(){}))},a.changeScheduleType=function(e){var t=e.target.dataset.type;a.setState({type:t})},a.changeMode=function(){var e=a.state.destroyMode;a.setState({destroyMode:!e})},a.updateProject=function(e){return a.setState({projects:e})},a.refreshResource=function(e){var t=a.state.resources.slice();t.push(e),a.setState({resources:t})},a.refreshProject=function(e){var t=a.state.projects.slice();t.push(e),a.updateProject(t)},a.refreshTask=function(e,t,r){var n=a.state.projects;if("new"===r){var s=n.slice();s[t].tasks.push(e),a.updateProject(s)}else if("edit"===r){var c=n[t].tasks.map((function(t){return t.id===e.id?e:t})),o=n.map((function(e,a){var r=e;return t===a&&(r.tasks=c),r}));a.updateProject(o)}else if("destroy"===r){var i=n[t].tasks.filter((function(t){return t.id!==e.id})),l=n.map((function(e,a){var r=e;return t===a&&(r.tasks=i),r}));a.updateProject(l)}},a.state={resources:[],projects:[],type:"weeks",destroyMode:!1},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getProjectIndex()}},{key:"render",value:function(){var e=this.state,t=e.type,a=e.projects,r=e.resources,s=e.destroyMode;return n.a.createElement("div",{className:"App"},n.a.createElement(x,{getProjectIndex:this.getProjectIndex,refreshProject:this.refreshProject,refreshResource:this.refreshResource,changeMode:this.changeMode}),n.a.createElement("div",{className:"mainContainer"},n.a.createElement(ie,{resources:r,refreshResource:this.getProjectIndex,scheduleType:t,onClick:this.changeScheduleType}),n.a.createElement("div",{className:"gantt"},n.a.createElement("div",{className:"gantt-index"},n.a.createElement(T,{resources:r,projects:a,updateProject:this.updateProject}),n.a.createElement(z,{refreshTask:this.refreshTask,projects:a,mode:s})),n.a.createElement("div",{className:"gantt-schedule"},n.a.createElement("div",{className:"gantt-schedule-header"},n.a.createElement(oe,{scheduleType:t})),n.a.createElement(re,{projects:a,scheduleType:t})))))}}]),t}(r.PureComponent),ue=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).handleSignIn=function(){var e=a.state,t=e.email,r=e.password,n=C.buildRequestUrl("/sessions"),s={email:t,password:r};fetch(n,{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,r=e.token,n=e.errors;t?(localStorage.setItem("token",r),a.setState({isSignIn:!0})):a.setState({errors:n})})).catch((function(){}))},a.emailOnChange=function(e){var t=e.target.value;a.setState({email:t})},a.passwordOnChange=function(e){var t=e.target.value;a.setState({password:t})},a.state={email:"",password:"",isSignIn:!1,errors:[]},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,r=e.isSignIn,s=e.errors;return r?n.a.createElement(f.a,{to:"/reach"}):n.a.createElement("div",{className:"background"},n.a.createElement("div",{className:"session"},n.a.createElement("div",{className:"session__title"},"Sign in to Reach"),0!==s.length&&n.a.createElement(N,{action:"Authentication",errors:s}),n.a.createElement("input",{type:"text",className:"session__email",placeholder:"Email",value:t,onChange:this.emailOnChange}),n.a.createElement("input",{type:"password",className:"session__password",placeholder:"Password",value:a,onChange:this.passwordOnChange}),n.a.createElement("button",{type:"button",onClick:this.handleSignIn,className:"session__submit"},"Sign In"),n.a.createElement(g.b,{to:"/reach/signup",className:"session__switch"},"Create account")))}}]),t}(r.Component),de=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).handleSignUp=function(){var e=a.state,t=e.avatar,r=e.name,n=e.email,s=e.password,c=e.passwordConfirmation,o=new FormData;o.append("user[name]",r),o.append("user[email]",n),o.append("user[password]",s),o.append("user[password_confirmation]",c),t&&o.append("user[avatar]",t);var i=C.buildRequestUrl("/users");fetch(i,{method:"POST",body:o}).then((function(e){return e.json()})).then((function(e){e.is_created?(localStorage.setItem("token",e.token),a.setState({isSignIn:!0})):a.setState({errors:e.errors})})).catch((function(){}))},a.onChangeFile=function(e){var t=e.target.files[0],r=URL.createObjectURL(t);a.setState({uri:r,avatar:t})},a.onChangeName=function(e){var t=e.target.value;a.setState({name:t})},a.onChangeEmail=function(e){var t=e.target.value;a.setState({email:t})},a.onChangePassword=function(e){var t=e.target.value;a.setState({password:t})},a.onChangePasswordConfirmation=function(e){var t=e.target.value;a.setState({passwordConfirmation:t})},a.state={uri:"",avatar:null,name:"",email:"",password:"",passwordConfirmation:"",errors:[],isSignIn:!1},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state,t=e.uri,a=e.name,r=e.email,s=e.password,c=e.passwordConfirmation,o=e.errors;return e.isSignIn?n.a.createElement(f.a,{to:"/reach"}):n.a.createElement("div",{className:"background"},n.a.createElement("div",{className:"session"},n.a.createElement("div",{className:"session__title"},"Create account"),0!==o.length&&n.a.createElement(N,{action:"Registration",errors:o}),n.a.createElement("label",{htmlFor:"avatarForm",className:"session__avatar"},n.a.createElement("input",{id:"avatarForm",type:"file",className:"session__fileField",onChange:this.onChangeFile}),""===t?n.a.createElement(_.a,{icon:["fas","user"],className:"session__fileIcon"}):n.a.createElement("img",{src:t,alt:"avatar",className:"session__preview"})),n.a.createElement("div",{className:"session__fileLabel"},"Upload your avatar"),n.a.createElement("input",{type:"text",className:"session__name",placeholder:"Name",value:a,onChange:this.onChangeName}),n.a.createElement("input",{type:"text",className:"session__email",placeholder:"Email",value:r,onChange:this.onChangeEmail}),n.a.createElement("input",{type:"password",className:"session__password",placeholder:"Password",value:s,onChange:this.onChangePassword}),n.a.createElement("input",{type:"password",className:"session__password",placeholder:"Password confirmation",value:c,onChange:this.onChangePasswordConfirmation}),n.a.createElement("button",{type:"button",onClick:this.handleSignUp,className:"session__submit"},"Sign Up"),n.a.createElement(g.b,{to:"/reach/signin",className:"session__switch"},"Move to Sign In")))}}]),t}(r.Component),me=function(e){function t(e){var a;Object(d.a)(this,t),a=Object(h.a)(this,Object(p.a)(t).call(this,e));var r=null!==localStorage.getItem("token");return a.state={isAuthenticated:r},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return this.state.isAuthenticated?n.a.createElement(le,null):n.a.createElement(f.a,{to:"/reach/signin"})}}]),t}(r.Component),he=function(){return n.a.createElement(g.a,null,n.a.createElement(f.d,null,n.a.createElement(f.b,{path:"/reach/signin"},n.a.createElement(ue,null)),n.a.createElement(f.b,{path:"/reach/signup"},n.a.createElement(de,null)),n.a.createElement(f.b,{exact:!0,path:"/reach"},n.a.createElement(me,null)),n.a.createElement(f.b,{exact:!0},n.a.createElement(ue,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.b.add(i.a,l.a,u.a),c.a.render(n.a.createElement(he,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},47:function(e,t,a){},59:function(e,t,a){},62:function(e,t,a){},69:function(e,t,a){e.exports=a(132)},74:function(e,t,a){},81:function(e,t,a){},83:function(e,t,a){}},[[69,1,2]]]);
//# sourceMappingURL=main.eb73a14b.chunk.js.map