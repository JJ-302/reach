(this.webpackJsonpreach=this.webpackJsonpreach||[]).push([[0],{129:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){},132:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(36),c=a.n(s),o=(a(74),a(35)),i=a(63),l=a(64),d=a(65),u=a(5),m=a(6),h=a(8),p=a(7),v=a(9),f=a(25),g=a(26),E=a(15),k=a.n(E),_=a(14),C=function(){function e(){Object(u.a)(this,e)}return Object(m.a)(e,null,[{key:"buildRequestUrl",value:function(e){return"http://localhost:3001"+e}},{key:"preparingRequest",value:function(e,t,a){switch(e){case"new":return{uriPattern:"/".concat(a),method:"POST"};case"edit":return{uriPattern:"/".concat(a,"/").concat(t),method:"PATCH"};default:return null}}},{key:"dateRangeStart",value:function(){return k()(new Date).subtract(2,"weeks").startOf("days")}},{key:"dateRangeEnd",value:function(){return k()("2020/4/1","YYYY/MM/DD")}}]),e}(),b=(a(81),function(e){return e.errors.map((function(e){return r.a.createElement("div",{className:"error__message",key:e.error},e.error)}))}),N=function(e){var t=e.action,a=e.errors,n="".concat(t," failed!");return r.a.createElement("div",{className:"error"},r.a.createElement("div",{className:"error__title"},n),r.a.createElement(b,{errors:a}))},y=(a(59),function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).editProjectFormValue=function(){var e=a.props.id,t=C.buildRequestUrl("/projects/".concat(e,"/edit"));fetch(t,{method:"GET",headers:{"X-Reach-token":a.token}}).then((function(e){return e.json()})).then((function(e){var t=e.is_authenticated,n=e.project;if(t){var r=n.name,s=n.description;a.setState({name:r,description:s})}})).catch((function(){}))},a.handleCreate=function(){var e=a.state,t=e.name,n=e.description,r=a.props.id,s=C.preparingRequest(a.action,r,"projects");if(null!==s){var c=C.buildRequestUrl(s.uriPattern),o={name:t,description:n};fetch(c,{method:s.method,headers:{"Content-Type":"application/json","X-Reach-token":a.token},body:JSON.stringify(o)}).then((function(e){return e.json()})).then((function(e){var t=e.is_created,n=e.errors,r=e.project,s=a.props,c=s.closeModal,o=s.refresh;t&&"new"===a.action?(o(r),c()):t&&"edit"===a.action?(o(r.name),c()):a.setState({errors:n})})).catch((function(){}))}},a.onChangeName=function(e){var t=e.target.value;a.setState({name:t})},a.onChangeDescription=function(e){var t=e.target.value;a.setState({description:t})},a.onClickOverlay=function(e){e.stopPropagation()},a.token=localStorage.getItem("token");var n=a.props.action;return a.action=n,a.state={name:"",description:"",errors:[]},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){"edit"===this.action&&this.editProjectFormValue()}},{key:"render",value:function(){var e=this.props.closeModal,t=this.state,a=t.name,n=t.description,s=t.errors,c="new"===this.action?"Create ":"Update ";return r.a.createElement("div",{className:"modalOverlay",onClick:e},r.a.createElement("div",{className:"modalForm",onClick:this.onClickOverlay},r.a.createElement("div",{className:"modalForm__title"},c,"Project"),0!==s.length&&r.a.createElement(N,{action:"Project creation",errors:s}),r.a.createElement("input",{type:"text",className:"modalForm__textInput",placeholder:"Type a project name",value:a,onChange:this.onChangeName}),r.a.createElement("textarea",{className:"modalForm__textarea",placeholder:"Type a project description",value:n,onChange:this.onChangeDescription}),r.a.createElement("button",{type:"button",onClick:this.handleCreate,className:"modalForm__button"},c)))}}]),t}(n.PureComponent)),w=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).getIndexColors=function(){var e=localStorage.getItem("token"),t=C.buildRequestUrl("/colors");fetch(t,{method:"GET",headers:{"X-Reach-token":e}}).then((function(e){return e.json()})).then((function(t){var n=t.is_authenticated,r=t.colors;n&&a.setState({colors:r,token:e})})).catch((function(){}))},a.handleCreate=function(){var e=a.props.closeModal,t=a.state,n=t.pickedColor,r=t.token,s={name:t.name,color_id:n},c=C.buildRequestUrl("/resources");fetch(c,{method:"POST",headers:{"Content-Type":"application/json","X-Reach-token":r},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(t){var n=t.errors;t.is_created?e():a.setState({errors:n})})).catch((function(){}))},a.onPickColor=function(e){var t=e.target.dataset.color;a.setState({pickedColor:t})},a.onChangeName=function(e){var t=e.target.value;a.setState({name:t})},a.onClickOverlay=function(e){e.stopPropagation()},a.state={name:"",token:"",colors:[],pickedColor:"",errors:[]},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getIndexColors()}},{key:"render",value:function(){var e=this.props,t=e.closeModal,a=e.action,n=this.state,s=n.name,c=n.colors,o=n.pickedColor,i=n.errors;return r.a.createElement("div",{className:"modalOverlay",onClick:t},r.a.createElement("div",{className:"modalForm",onClick:this.onClickOverlay},r.a.createElement("div",{className:"modalForm__title"},a,"Resource"),0!==i.length&&r.a.createElement(N,{action:"Resource creation",errors:i}),r.a.createElement("input",{type:"text",className:"modalForm__textInput",placeholder:"Type a resource name",value:s,onChange:this.onChangeName}),r.a.createElement("div",{className:"modalForm__label"},"Chart color"),r.a.createElement("div",{className:"colorPallet"},r.a.createElement(j,{colors:c,pickedColor:o,onPickColor:this.onPickColor})),r.a.createElement("button",{type:"button",onClick:this.handleCreate,className:"modalForm__button"},a)))}}]),t}(n.PureComponent),j=function(e){var t=e.colors,a=e.pickedColor,n=e.onPickColor;return t.map((function(e){var t=a===String(e.id)?"--selected":"",s="colorPallet__body".concat(t);return r.a.createElement("div",{key:e.id,className:"colorPallet__edge"},r.a.createElement("div",{className:s,style:{backgroundColor:e.value},"data-color":e.id,onClick:n}))}))},S=(a(47),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).getCurrentAccount=function(){var e=C.buildRequestUrl("/users/edit");fetch(e,{method:"GET",headers:{"X-Reach-token":a.token}}).then((function(e){return e.json()})).then((function(e){var t=e.is_authenticated,n=e.user;if(t){var r=n.avatar,s=n.name,c=n.email;a.avatar=r,a.name=s,a.email=c,a.setState({uri:r,name:s,email:c})}})).catch((function(){}))},a.handleUpdate=function(){var e=a.state,t=e.avatar,n=e.name,r=e.email,s=new FormData;s.append("user[name]",n),s.append("user[email]",r),t&&s.append("user[avatar]",t);var c=C.buildRequestUrl("/users/update");fetch(c,{method:"PATCH",headers:{"X-Reach-token":a.token},body:s}).then((function(e){return e.json()})).then((function(e){var t=e.is_updated,n=e.errors;t?(0,a.props.refresh)():a.setState({errors:n})})).catch((function(){}))},a.onChangeFile=function(e){var t=e.target.files[0],n=URL.createObjectURL(t);a.setState({uri:n,avatar:t})},a.onChangeName=function(e){var t=e.target.value;a.setState({name:t})},a.onChangeEmail=function(e){var t=e.target.value;a.setState({email:t})},a.closeEditAccount=function(){(0,a.props.closeEditAccount)()},a.onClickOverlay=function(e){return e.stopPropagation()},a.state={uri:"",avatar:null,name:"",email:"",errors:[]},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.token=localStorage.getItem("token"),this.getCurrentAccount()}},{key:"render",value:function(){var e=this.state,t=e.uri,a=e.name,n=e.email,s=e.errors;return r.a.createElement("div",{className:"background--edit",onClick:this.closeEditAccount},r.a.createElement("div",{className:"session",onClick:this.onClickOverlay},r.a.createElement("div",{className:"session__title"},"Edit account"),0!==s.length&&r.a.createElement(N,{action:"Registration",errors:s}),r.a.createElement("label",{htmlFor:"avatarForm",className:"session__avatar"},r.a.createElement("input",{id:"avatarForm",type:"file",className:"session__fileField",onChange:this.onChangeFile}),""===t?r.a.createElement(_.a,{icon:["fas","user"],className:"session__fileIcon"}):r.a.createElement("img",{src:t,alt:"avatar",className:"session__preview"})),r.a.createElement("div",{className:"session__fileLabel"},"Upload your avatar"),r.a.createElement("input",{type:"text",className:"session__name",placeholder:"Name",value:a,onChange:this.onChangeName}),r.a.createElement("input",{type:"text",className:"session__email",placeholder:"Email",value:n,onChange:this.onChangeEmail}),r.a.createElement("button",{type:"button",onClick:this.handleUpdate,className:"session__submit"},"Update")))}}]),t}(n.Component)),D=(a(82),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).openProjectForm=function(){return a.setState({projectFormVisible:!0})},a.closeProjectForm=function(){return a.setState({projectFormVisible:!1})},a.openResourceForm=function(){return a.setState({resourceFormVisible:!0})},a.closeResourceForm=function(){return a.setState({resourceFormVisible:!1})},a.openEditAccount=function(){return a.setState({editAccuountVisible:!0})},a.closeEditAccount=function(){return a.setState({editAccuountVisible:!1})},a.toggleAccountMenu=function(){var e=a.state.accountMenuVisible;a.setState({accountMenuVisible:!e})},a.changeMode=function(){(0,a.props.changeMode)()},a.signOut=function(){localStorage.removeItem("token"),a.setState({isSignOut:!0})},a.state={projectFormVisible:!1,resourceFormVisible:!1,accountMenuVisible:!1,editAccuountVisible:!1,isSignOut:!1},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.refreshProject,a=e.getProjectIndex,n=this.state,s=n.projectFormVisible,c=n.resourceFormVisible,o=n.accountMenuVisible,i=n.editAccuountVisible;return n.isSignOut?r.a.createElement(f.a,{to:"/signin"}):r.a.createElement("div",{className:"sidebar"},r.a.createElement("div",{className:"sidebar__iconWrapper--plus",onClick:this.openProjectForm},r.a.createElement(_.a,{icon:["fas","plus"],className:"sidebar__icon"})),r.a.createElement("div",{className:"sidebar__iconWrapper--minus",onClick:this.changeMode},r.a.createElement(_.a,{icon:["fas","minus"],className:"sidebar__icon"})),r.a.createElement("div",{className:"sidebar__iconWrapper--resource",onClick:this.openResourceForm},r.a.createElement(_.a,{icon:["fas","tags"],className:"sidebar__icon"})),r.a.createElement("div",{className:"sidebar__iconWrapper--account",onClick:this.toggleAccountMenu},r.a.createElement(_.a,{icon:["fas","user"],className:"sidebar__icon"})),o&&r.a.createElement("div",{className:"overlay",onClick:this.toggleAccountMenu},r.a.createElement("div",{className:"accountMenu"},r.a.createElement("div",{className:"accountMenu__edit",onClick:this.openEditAccount},"Edit account"),r.a.createElement("div",{className:"accountMenu__signout",onClick:this.signOut},"Sign out"))),s&&r.a.createElement(y,{action:"new",refresh:t,closeModal:this.closeProjectForm}),c&&r.a.createElement(w,{action:"Create",closeModal:this.closeResourceForm}),i&&r.a.createElement(S,{refresh:a,closeEditAccount:this.closeEditAccount}))}}]),t}(n.PureComponent)),O=a(4),R=a.n(O),x=a(13),F=a(32),M=a.n(F),P=(a(61),-1),T=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).getUserIndex=function(){var e=C.buildRequestUrl("/users");fetch(e,{method:"GET",headers:{"X-Reach-token":a.token}}).then((function(e){return e.json()})).then((function(e){var t=e.users;e.is_authenticated&&a.setState({users:t})})).catch((function(){}))},a.search=function(){var e=a.state,t=e.projectId,n=e.taskName,r=e.startDateFrom,s=e.startDateTo,c=e.endDateFrom,o=e.endDateTo,i=e.extendFrom,l=e.extendTo,d=e.orderDuration,u=e.orderStartDate,m=e.orderEndDate,h=e.orderExtend,p=e.inCharge,v=e.selectedResources,f=C.buildRequestUrl("/tasks/search"),g={project_id:t,task_name:n,start_date:{from:r,to:s,order:u},end_date:{from:c,to:o,order:m},extend:{from:i,to:l,order:h},duration:{order:d},in_charge:p,resources:v};fetch(f,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)}).then((function(e){return e.json()})).then((function(e){var t=e.projects;(0,a.props.updateProject)(t)})).catch((function(){}))},a.sortingByDateRange=function(e){var t=a.state,n=t.startDateFrom,r=t.startDateTo,s=t.endDateFrom,c=t.endDateTo,o=t.extendFrom,i=t.extendTo,l=t.orderStartDate,d=t.orderEndDate,u=t.orderExtend;switch(e){case"start":return{rangeStart:n,rangeEnd:r,onChangeRangeStart:a.onChangeStartDateRangeS,onChangeRangeEnd:a.onChangeStartDateRangeE,order:l};case"end":return{rangeStart:s,rangeEnd:c,onChangeRangeStart:a.onChangeEndDateRangeS,onChangeRangeEnd:a.onChangeEndDateRangeE,order:d};case"extend":return{rangeStart:o,rangeEnd:i,onChangeRangeStart:a.onChangeExtendRangeS,onChangeRangeEnd:a.onChangeExtendRangeE,order:u};default:return{}}},a.onClickResource=function(){var e=a.state.searchByResourceVisible;a.setState({searchByResourceVisible:!e})},a.onClickName=function(){var e=a.state.searchByNameVisible;a.setState({searchByNameVisible:!e})},a.onClickDate=function(e){var t=e.currentTarget.dataset.type,n=a.state.searchByDateVisible;a.setState({searchByDateVisible:!n,dateType:t})},a.onClickDuration=function(){var e=a.state.searchByDurationVisible;a.setState({searchByDurationVisible:!e})},a.onClickInCharge=function(){var e=a.state.searchByUsersVisible;a.setState({searchByUsersVisible:!e})},a.onChangeOrder=function(){var e=Object(x.a)(R.a.mark((function e(t){var n,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.currentTarget.dataset.by,r=t.target.value,e.t0=n,e.next="duration"===e.t0?5:"start"===e.t0?8:"end"===e.t0?11:"extend"===e.t0?14:17;break;case 5:return e.next=7,a.setState({orderDuration:r,orderStartDate:"",orderEndDate:"",orderExtend:""});case 7:return e.abrupt("break",17);case 8:return e.next=10,a.setState({orderDuration:"",orderStartDate:r,orderEndDate:"",orderExtend:""});case 10:return e.abrupt("break",17);case 11:return e.next=13,a.setState({orderDuration:"",orderStartDate:"",orderEndDate:r,orderExtend:""});case 13:return e.abrupt("break",17);case 14:return e.next=16,a.setState({orderDuration:"",orderStartDate:"",orderEndDate:"",orderExtend:r});case 16:return e.abrupt("break",17);case 17:a.search();case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onChangeProject=function(){var e=Object(x.a)(R.a.mark((function e(t){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.value,e.next=3,a.setState({projectId:n});case 3:a.search();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onChangeTask=function(){var e=Object(x.a)(R.a.mark((function e(t){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.value,e.next=3,a.setState({taskName:n});case 3:a.search();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onChangeStartDateRangeS=function(){var e=Object(x.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({startDateFrom:t});case 2:a.search();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onChangeStartDateRangeE=function(){var e=Object(x.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({startDateTo:t});case 2:a.search();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onChangeEndDateRangeS=function(){var e=Object(x.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({endDateFrom:t});case 2:a.search();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onChangeEndDateRangeE=function(){var e=Object(x.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({endDateTo:t}),a.search();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onChangeExtendRangeS=function(){var e=Object(x.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({extendFrom:t});case 2:a.search();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onChangeExtendRangeE=function(){var e=Object(x.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({extendTo:t});case 2:a.search();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onClickAvatar=function(){var e=Object(x.a)(R.a.mark((function e(t){var n,r,s,c;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.state.inCharge,r=n,s=t.currentTarget.dataset.id,(c=n.indexOf(s))===P?r.push(s):r.splice(c,1),e.next=7,a.setState({inCharge:r});case 7:a.search();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onClickResourceIcon=function(){var e=Object(x.a)(R.a.mark((function e(t){var n,r,s,c;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.state.selectedResources,r=n,s=t.currentTarget.dataset.id,(c=n.indexOf(s))===P?r.push(s):r.splice(c,1),e.next=7,a.setState({selectedResources:r});case 7:a.search();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.clearSearchName=Object(x.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({taskName:"",projectId:"",searchByNameVisible:!1});case 2:a.search();case 3:case"end":return e.stop()}}),e)}))),a.clearSearchStartDate=Object(x.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({startDateFrom:"",startDateTo:"",orderStartDate:"",searchByDateVisible:!1});case 2:a.search();case 3:case"end":return e.stop()}}),e)}))),a.clearSearchEndDate=Object(x.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({endDateFrom:"",endDateTo:"",orderEndDate:"",searchByDateVisible:!1});case 2:a.search();case 3:case"end":return e.stop()}}),e)}))),a.clearSearchExtend=Object(x.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({extendFrom:"",extendTo:"",orderExtend:"",searchByDateVisible:!1});case 2:a.search();case 3:case"end":return e.stop()}}),e)}))),a.clearSearchDuration=Object(x.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({orderDuration:"",searchByDurationVisible:!1});case 2:a.search();case 3:case"end":return e.stop()}}),e)}))),a.clearSearchInCharge=Object(x.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({inCharge:[],searchByUsersVisible:!1});case 2:a.search();case 3:case"end":return e.stop()}}),e)}))),a.closeAllModal=function(){a.setState({searchByNameVisible:!1,searchByDateVisible:!1,searchByDurationVisible:!1,searchByUsersVisible:!1,searchByResourceVisible:!1})},a.stopPropagation=function(e){return e.stopPropagation()},a.token=localStorage.getItem("token"),a.state={users:[],searchByNameVisible:!1,searchByDateVisible:!1,searchByDurationVisible:!1,searchByUsersVisible:!1,searchByResourceVisible:!1,dateType:"",projectId:"",taskName:"",startDateFrom:"",startDateTo:"",endDateFrom:"",endDateTo:"",extendFrom:"",extendTo:"",orderDuration:"",orderStartDate:"",orderEndDate:"",orderExtend:"",inCharge:[],selectedResources:[]},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getUserIndex()}},{key:"render",value:function(){var e=this.props,t=e.projects,a=e.resources,n=this.state,s=n.users,c=n.searchByNameVisible,o=n.searchByDateVisible,i=n.searchByDurationVisible,l=n.searchByUsersVisible,d=n.searchByResourceVisible,u=n.projectId,m=n.taskName,h=n.dateType,p=n.startDateFrom,v=n.startDateTo,f=n.endDateFrom,g=n.endDateTo,E=n.extendFrom,k=n.extendTo,_=n.orderStartDate,C=n.orderEndDate,b=n.orderExtend,N=n.orderDuration,y=n.inCharge,w=n.selectedResources,j=0===w.length?"resourceIcon":"resourceIcon--selected",S=this.sortingByDateRange(h),D=S.rangeStart,O=S.rangeEnd,R=S.onChangeRangeStart,x=S.onChangeRangeEnd,F=S.order;return r.a.createElement("div",{className:"gantt-index-header"},r.a.createElement("div",{className:"gantt-index-header__resource"},r.a.createElement("div",{className:j,onClick:this.onClickResource})),r.a.createElement("div",{className:"gantt-index-header__name"},""===u&&""===m?r.a.createElement("span",{className:"gantt-index-header__label",onClick:this.onClickName},"Name"):r.a.createElement("div",{className:"selected"},r.a.createElement("span",{className:"selected__label",onClick:this.onClickName},"Name"),r.a.createElement("span",{className:"selected__clear",onClick:this.clearSearchName},"\xd7"))),r.a.createElement("div",{className:"gantt-index-header__startDate"},""===p&&""===v&&""===_?r.a.createElement("span",{className:"gantt-index-header__label","data-type":"start",onClick:this.onClickDate},"StartDate"):r.a.createElement("div",{className:"selected"},r.a.createElement("span",{className:"selected__label","data-type":"start",onClick:this.onClickDate},"StartDate"),r.a.createElement("span",{className:"selected__clear",onClick:this.clearSearchStartDate},"\xd7"))),r.a.createElement("div",{className:"gantt-index-header__endDate"},""===f&&""===g&&""===C?r.a.createElement("span",{className:"gantt-index-header__label","data-type":"end",onClick:this.onClickDate},"EndDate"):r.a.createElement("div",{className:"selected"},r.a.createElement("span",{className:"selected__label","data-type":"end",onClick:this.onClickDate},"EndDate"),r.a.createElement("span",{className:"selected__clear",onClick:this.clearSearchEndDate},"\xd7"))),r.a.createElement("div",{className:"gantt-index-header__extend"},""===E&&""===k&&""===b?r.a.createElement("span",{className:"gantt-index-header__label","data-type":"extend",onClick:this.onClickDate},"Extend"):r.a.createElement("div",{className:"selected"},r.a.createElement("span",{className:"selected__label","data-type":"extend",onClick:this.onClickDate},"Extend"),r.a.createElement("span",{className:"selected__clear",onClick:this.clearSearchExtend},"\xd7"))),r.a.createElement("div",{className:"gantt-index-header__duration"},""===N?r.a.createElement("span",{className:"gantt-index-header__label",onClick:this.onClickDuration},"Duration"):r.a.createElement("div",{className:"selected"},r.a.createElement("span",{className:"selected__label",onClick:this.onClickDuration},"Duration"),r.a.createElement("span",{className:"selected__clear",onClick:this.clearSearchDuration},"\xd7"))),r.a.createElement("div",{className:"gantt-index-header__inCharge"},0===y.length?r.a.createElement("span",{className:"gantt-index-header__label",onClick:this.onClickInCharge},"InCharge"):r.a.createElement("div",{className:"selected"},r.a.createElement("span",{className:"selected__label",onClick:this.onClickInCharge},"InCharge"),r.a.createElement("span",{className:"selected__clear",onClick:this.clearSearchInCharge},"\xd7"))),d&&r.a.createElement("div",{className:"overlay",onClick:this.closeAllModal},r.a.createElement(q,{resources:a,selectedResources:w,onClickResource:this.onClickResourceIcon,stopPropagation:this.stopPropagation})),c&&r.a.createElement("div",{className:"overlay",onClick:this.closeAllModal},r.a.createElement(A,{projectId:u,projects:t,onChangeProject:this.onChangeProject,taskName:m,onChangeTask:this.onChangeTask,stopPropagation:this.stopPropagation})),o&&r.a.createElement("div",{className:"overlay",onClick:this.closeAllModal},r.a.createElement(Y,{dateType:h,rangeStart:D,rangeEnd:O,onChangeRangeStart:R,onChangeRangeEnd:x,onChangeOrder:this.onChangeOrder,selected:F,stopPropagation:this.stopPropagation})),i&&r.a.createElement("div",{className:"overlay",onClick:this.closeAllModal},r.a.createElement(I,{onChangeOrder:this.onChangeOrder,selected:N,stopPropagation:this.stopPropagation})),l&&r.a.createElement("div",{className:"overlay",onClick:this.closeAllModal},r.a.createElement(U,{users:s,inCharge:y,onClickAvatar:this.onClickAvatar,stopPropagation:this.stopPropagation})))}}]),t}(n.Component),V=function(e){var t=e.onChangeOrder,a=e.by,n=e.selected;return r.a.createElement("select",{"data-by":a,value:n,onChange:t,className:"search__order"},r.a.createElement("option",{key:"default",value:null,"aria-label":"order"}),[{label:"ASC",value:"ASC"},{label:"DESC",value:"DESC"}].map((function(e){return r.a.createElement("option",{key:e.label,value:e.value},e.label)})))},I=function(e){var t=e.onChangeOrder,a=e.selected,n=e.stopPropagation;return r.a.createElement("div",{className:"search--duration",onClick:n},r.a.createElement("div",{className:"search__label"},"Order by duration"),r.a.createElement(V,{by:"duration",onChangeOrder:t,selected:a}),r.a.createElement("div",{className:"search__divide"}))},Y=function(e){var t=e.rangeStart,a=e.rangeEnd,n=e.onChangeRangeStart,s=e.onChangeRangeEnd,c=e.dateType,o=e.onChangeOrder,i=e.order,l=e.stopPropagation,d="search--".concat(c),u="Filter by ".concat(c," date");return r.a.createElement("div",{className:d,onClick:l},r.a.createElement("div",{className:"search__label"},"Order by duration"),r.a.createElement(V,{by:c,onChangeOrder:o,selected:i}),r.a.createElement("div",{className:"search__divide"}),r.a.createElement("div",{className:"search__label"},u),r.a.createElement("div",{className:"search__dateWrapper"},r.a.createElement(M.a,{className:"search__dateRange",dateFormat:"yyyy/MM/dd",showWeekNumbers:!0,placeholderText:"Select range start",selected:t,onChange:n}),r.a.createElement(M.a,{className:"search__dateRange",dateFormat:"yyyy/MM/dd",showWeekNumbers:!0,placeholderText:"Select range end",selected:a,onChange:s})))},A=function(e){var t=e.projectId,a=e.projects,n=e.onChangeProject,s=e.taskName,c=e.onChangeTask,o=e.stopPropagation;return r.a.createElement("div",{className:"search--name",onClick:o},r.a.createElement("div",{className:"search__label"},"Filter by Project"),r.a.createElement("select",{value:t,onChange:n,className:"search__project"},r.a.createElement("option",{key:"default",value:null,"aria-label":"selectProject"}),a.map((function(e){return r.a.createElement("option",{key:e.name,value:e.id},e.name)}))),r.a.createElement("div",{className:"search__divide"}),r.a.createElement("div",{className:"search__label"},"Search by Task name"),r.a.createElement("input",{type:"text",className:"search__task",value:s,onChange:c}))},B=function(e){var t=e.users,a=e.onClickAvatar,n=e.inCharge;return t.map((function(e){var t=n.indexOf(String(e.id));return r.a.createElement("div",{key:e.id,className:"avatar"},r.a.createElement("div",{"data-id":e.id,onClick:a,className:"avatar__wrapper"},r.a.createElement("img",{src:e.avatar,alt:e.name,className:"avatar__image"}),t!==P&&r.a.createElement("div",{className:"avatar__selected"})),r.a.createElement("div",{className:"avatar__name"},e.name))}))},U=function(e){var t=e.users,a=e.inCharge,n=e.onClickAvatar,s=e.stopPropagation;return r.a.createElement("div",{className:"search--user",onClick:s},r.a.createElement("div",{className:"search__label"},"Search by users"),r.a.createElement("div",{className:"search__usersWrapper"},r.a.createElement(B,{users:t,inCharge:a,onClickAvatar:n})))},W=function(e){var t=e.resources,a=e.selectedResources,n=e.onClickResource;return t.map((function(e){var t=a.indexOf(String(e.id));return r.a.createElement("div",{key:e.id,className:"resource"},r.a.createElement("div",{"data-id":e.id,onClick:n,className:"resource__wrapper"},r.a.createElement("div",{className:"resource__icon",style:{backgroundColor:e.color}}),t!==P&&r.a.createElement("div",{className:"resource__selected"})),r.a.createElement("div",{className:"resource__name"},e.name))}))},q=function(e){var t=e.resources,a=e.selectedResources,n=e.onClickResource,s=e.stopPropagation;return r.a.createElement("div",{className:"search--resource",onClick:s},r.a.createElement("div",{className:"search__label"},"Search by resource"),r.a.createElement("div",{className:"search__resourceWrapper"},r.a.createElement(W,{resources:t,selectedResources:a,onClickResource:n})))},X=(a(129),function(e){var t=e.members;return t.map((function(e,a){return a>3?null:a<3?r.a.createElement("img",{key:e.name,src:e.avatar,alt:e.name,className:"task__avatar"}):r.a.createElement("div",{key:String(a),className:"task__avatar--length"},t.length)}))}),H=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleDestroy=function(e){e.stopPropagation(),a.token=localStorage.getItem("token");var t=e.currentTarget.dataset.id,n=C.buildRequestUrl("/tasks/".concat(t));fetch(n,{method:"DELETE",headers:{"X-Reach-token":a.token}}).then((function(e){return e.json()})).then((function(e){var t=e.is_delete,n=e.task;if(t){var r=a.props,s=r.index;(0,r.refresh)(n,s,"destroy")}})).catch((function(){}))},a.onClickOverlay=function(e){e.stopPropagation()},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.tasks,n=t.onClick,s=t.destroyMode;return a.map((function(t){var a="progress"===t.percentComplete?"task":"task--complete";return r.a.createElement("div",{key:t.id,"data-action":"edit","data-id":t.id,className:a,onClick:n},r.a.createElement("div",{className:"task__icon",onClick:e.onClickOverlay},s?r.a.createElement(_.a,{"data-id":t.id,icon:["fas","minus-circle"],className:"task__delete",onClick:e.handleDestroy}):r.a.createElement("div",{className:"task__resource",style:{backgroundColor:t.resource.color}})),r.a.createElement("div",{className:"task__name"},t.name),r.a.createElement("div",{className:"task__startDate"},t.startDate),r.a.createElement("div",{className:"task__endDate"},t.endDate),r.a.createElement("div",{className:"task__extend"},t.extend),r.a.createElement("div",{className:"task__duration"},t.duration),r.a.createElement("div",{className:"task__inCharge"},r.a.createElement(X,{members:t.users})))}))}}]),t}(n.Component),L=-1,G=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).getTaskFormValue=function(){a.token=localStorage.getItem("token");var e=C.buildRequestUrl("/tasks/new");fetch(e,{method:"GET",headers:{"X-Reach-token":a.token}}).then((function(e){return e.json()})).then((function(e){var t=e.is_authenticated,n=e.resources,r=e.users;t&&a.setState({resources:n,users:r})})).catch((function(){}))},a.editTaskFormValue=function(e){a.token=localStorage.getItem("token");var t=C.buildRequestUrl("/tasks/".concat(e,"/edit"));fetch(t,{method:"GET",headers:{"X-Reach-token":a.token}}).then((function(e){return e.json()})).then((function(e){var t=e.is_authenticated,n=e.resources,r=e.users;if(t){var s=e.task,c=s.description,o=s.startDate,i=s.endDate,l=s.extend,d=s.name,u=s.percentComplete,m=s.userIds,h=s.resourceId,p="complete"===u,v=m.map((function(e){return String(e)}));a.setState({resources:n,users:r,name:d,complete:p,description:c,startDate:new Date(o),endDate:l?new Date(l):new Date(i),inCharge:v,resource:h})}})).catch((function(){}))},a.onChangeName=function(e){var t=e.target.value;a.setState({name:t})},a.onChangeResource=function(e){var t=e.target.value;a.setState({resource:t})},a.onChangeStartDate=function(e){a.setState({startDate:e})},a.onChangeEndDate=function(e){a.setState({endDate:e})},a.onCheck=function(){var e=a.state.complete;a.setState({complete:!e})},a.onClickAvatar=function(e){var t=a.state.inCharge,n=t,r=e.currentTarget.dataset.id,s=t.indexOf(r);s===L?n.push(r):n.splice(s,1),a.setState({inCharge:n})},a.onChangeDescription=function(e){var t=e.target.value;a.setState({description:t})},a.createTask=function(){var e=a.props,t=e.id,n=e.taskID,r=e.action,s=a.state,c=s.name,o=s.resource,i=s.startDate,l=s.endDate,d=s.complete,u=s.inCharge,m=s.description,h=C.preparingRequest(r,n,"tasks");if(null!==h){var p=C.buildRequestUrl(h.uriPattern),v={name:c,description:m,duration:k()(l).diff(k()(i),"days"),percent_complete:d?"complete":"progress",resource_id:o,project_id:t,start_date:i,end_date:l,user_ids:u};"edit"===r&&(v.extend=l,delete v.end_date),fetch(p,{method:h.method,headers:{"X-Reach-token":a.token,"Content-Type":"application/json"},body:JSON.stringify(v)}).then((function(e){return e.json()})).then((function(e){var t=e.is_created,n=e.errors,s=e.task;if(t){var c=a.props;(0,c.refresh)(s,c.index,r),a.setState({errors:[]})}else a.setState({errors:n})})).catch((function(){}))}},a.state={resources:[],users:[],name:"",resource:"",startDate:null,endDate:null,complete:!1,inCharge:[],description:"",errors:[]},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.taskID,a=e.action;"new"===a?this.getTaskFormValue():"edit"===a&&this.editTaskFormValue(t)}},{key:"render",value:function(){var e=this.props,t=e.closeModal,a=e.action,n="edit"===a?"Update":"Add",s=this.state,c=s.users,o=s.resources,i=s.resource,l=s.name,d=s.startDate,u=s.endDate,m=s.complete,h=s.inCharge,p=s.description,v=s.errors;return r.a.createElement("div",{className:"taskForm"},r.a.createElement("div",{className:"taskForm__close",onClick:t},"\xd7"),r.a.createElement("div",{className:"taskForm__title"},n,"Task"),0!==v.length&&r.a.createElement(N,{action:"Task creation",errors:v}),r.a.createElement("div",{className:"taskFormRow"},r.a.createElement("div",{className:"taskFormRow__label"},"Name"),r.a.createElement("input",{type:"text",className:"taskFormRow__name",value:l,onChange:this.onChangeName})),r.a.createElement("div",{className:"taskFormRow"},r.a.createElement("div",{className:"taskFormRow__label"},"Resource"),r.a.createElement("select",{value:i,onChange:this.onChangeResource,className:"taskFormRow__resource"},r.a.createElement("option",{key:"default",value:null,"aria-label":"...select"}),r.a.createElement(J,{resources:o})),r.a.createElement("div",{className:"taskFormRow__divide"})),r.a.createElement("div",{className:"taskFormRow"},r.a.createElement("div",{className:"taskFormRow__label"},"Start date"),r.a.createElement(M.a,{className:"taskFormRow__date",dateFormat:"yyyy/MM/dd",showWeekNumbers:!0,selected:d,onChange:this.onChangeStartDate})),r.a.createElement("div",{className:"taskFormRow"},r.a.createElement("div",{className:"taskFormRow__label"},"End date"),r.a.createElement(M.a,{className:"taskFormRow__date",dateFormat:"yyyy/MM/dd",showWeekNumbers:!0,selected:u,onChange:this.onChangeEndDate})),"edit"===a&&r.a.createElement("div",{className:"taskFormRow"},r.a.createElement("div",{className:"taskFormRow__label"},"Complete"),r.a.createElement("div",{className:"taskFormRow__complete",onClick:this.onCheck},r.a.createElement("div",{className:"taskFormRow__checkbox"},r.a.createElement(_.a,{icon:["far","square"]}),m&&r.a.createElement(_.a,{icon:["fas","check"],className:"taskFormRow__checked"})))),r.a.createElement("div",{className:"taskFormRow"},r.a.createElement("div",{className:"taskFormRow__label"},"In charge"),r.a.createElement("div",{className:"taskFormRow__inCharge"},r.a.createElement(K,{users:c,inCharge:h,onClickAvatar:this.onClickAvatar}))),r.a.createElement("div",{className:"taskFormRow"},r.a.createElement("div",{className:"taskFormRow__label"},"Description"),r.a.createElement("textarea",{className:"taskFormRow__description",value:p,onChange:this.onChangeDescription})),r.a.createElement("button",{type:"button",onClick:this.createTask,className:"taskForm__button"},n))}}]),t}(n.Component),J=function(e){return e.resources.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))},K=function(e){var t=e.users,a=e.onClickAvatar,n=e.inCharge;return t.map((function(e){var t=n.indexOf(String(e.id));return r.a.createElement("div",{key:e.id,className:"avatar"},r.a.createElement("div",{"data-id":e.id,onClick:a,className:"avatar__wrapper"},r.a.createElement("img",{src:e.avatar,alt:e.name,className:"avatar__image"}),t!==L&&r.a.createElement("div",{className:"avatar__selected"})),r.a.createElement("div",{className:"avatar__name"},e.name))}))},$=(a(62),function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).openModal=function(e){a.id=e.currentTarget.dataset.id||null,a.action=e.currentTarget.dataset.action,a.setState({isVisible:!0})},a.closeModal=function(){return a.setState({isVisible:!1})},a.openProjectForm=function(){return a.setState({projectFormVisible:!0})},a.closeProjectForm=function(){return a.setState({projectFormVisible:!1})},a.updateProject=function(e){return a.setState({name:e})};var n=a.props.project;return a.state={name:n.name,isVisible:!1,projectFormVisible:!1},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.project,a=e.index,n=e.refreshTask,s=e.destroyMode,c=t.tasks,o=t.id,i=this.state,l=i.isVisible,d=i.projectFormVisible,u=i.name;return r.a.createElement("div",{key:u,className:"project"},r.a.createElement("div",{className:"projectHeader"},r.a.createElement("div",{className:"projectHeader__name"},u),r.a.createElement(_.a,{icon:["fas","edit"],className:"projectHeader__edit",onClick:this.openProjectForm}),r.a.createElement(_.a,{icon:["fas","plus"],"data-action":"new",className:"projectHeader__addTask",onClick:this.openModal})),c&&r.a.createElement(H,{destroyMode:s,index:a,refresh:n,tasks:c,onClick:this.openModal}),l&&r.a.createElement(G,{id:o,action:this.action,taskID:this.id,refresh:n,index:a,closeModal:this.closeModal}),d&&r.a.createElement(y,{id:o,refresh:this.updateProject,action:"edit",closeModal:this.closeProjectForm}))}}]),t}(n.Component)),z=function(e){var t=e.projects,a=e.refreshTask,n=e.mode;return t.map((function(e,t){return r.a.createElement($,{refreshTask:a,project:e,key:e.name,index:t,destroyMode:n})}))},Q=(a(130),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).onMouseEnter=function(e){var t=window.innerWidth<e.clientX+300,n=window.innerHeight<e.clientY+300,r=t?e.clientX-280:e.clientX+30,s=n?e.clientY-150:e.clientY;a.setState({isHover:!0,offsetX:r,offsetY:s})},a.onMouseLeave=function(){a.setState({isHover:!1})},a.state={isHover:!1,offsetX:0,offsetY:0},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.chartWidth,a=e.data,n=this.state,s=n.isHover,c=n.offsetX,o=n.offsetY;return r.a.createElement("div",{style:{width:t,backgroundColor:a.resource.color},className:"chartbar",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},s&&r.a.createElement(ee,{data:a,offsetX:c,offsetY:o}))}}]),t}(n.PureComponent)),Z=function(e){return e.users.map((function(e){return r.a.createElement("div",{key:e.name,className:"windowMembers__name"},e.name)}))},ee=function(e){var t=e.data,a=e.offsetX,n=e.offsetY;return r.a.createElement("div",{className:"window",style:{top:n,left:a}},r.a.createElement("div",{className:"windowRow"},r.a.createElement("div",{className:"windowRow__label"},"Name:"),r.a.createElement("div",{className:"windowRow__name"},t.name)),r.a.createElement("div",{className:"windowRow"},r.a.createElement("div",{className:"windowRow__label"},"StartDate:"),r.a.createElement("div",{className:"window__startDate"},t.startDate)),r.a.createElement("div",{className:"windowRow"},r.a.createElement("div",{className:"windowRow__label"},"EndDate:"),r.a.createElement("div",{className:"window__endDate"},t.endDate)),r.a.createElement("div",{className:"windowRow"},r.a.createElement("div",{className:"windowRow__label"},"Extend:"),r.a.createElement("div",{className:"window__extend"},t.extend)),r.a.createElement("div",{className:"windowRow"},r.a.createElement("div",{className:"windowRow__label"},"Duration:"),r.a.createElement("div",{className:"window__duration"},t.duration)),r.a.createElement("div",{className:"windowRow"},r.a.createElement("div",{className:"windowRow__label"},"Progress:"),r.a.createElement("div",{className:"window__progress"},t.percentComplete)),r.a.createElement("div",{className:"windowRow"},r.a.createElement("div",{className:"windowRow__label"},"InCharge:"),r.a.createElement("div",{className:"windowMembers"},r.a.createElement(Z,{users:t.users}))),r.a.createElement("div",{className:"windowCol"},r.a.createElement("div",{className:"windowCol__label"},"Description:"),r.a.createElement("div",{className:"windowCol__description"},t.description)))},te=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).calcOffset=function(e){return(k()(e.startDate,"YYYY/MM/DD").startOf("days").diff(a.start,"days")-3)*a.baseChartWidth},a.calcOffsetForWeeks=function(e){return Math.ceil(k()(e.startDate,"YYYY/MM/DD").startOf("week").diff(a.start,"weeks",!0))*a.baseChartWidth},a.calcChartWidthForWeeks=function(e){var t=e.extend||e.endDate,a=k()(e.startDate,"YYYY/MM/DD").startOf("week"),n=k()(t,"YYYY/MM/DD").endOf("week");return Math.ceil(n.diff(a,"weeks",!0))},a.isBefore=function(e){return k()(e.startDate,"YYYY/MM/DD").isSameOrBefore(a.start)},a.isBeforeForWeek=function(e){return k()(e.startDate,"YYYY/MM/DD").isBefore(a.start.startOf("week"))},a.start=C.dateRangeStart(),a.baseChartWidth=45,a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.scheduleType;return t.tasks.map((function(t){var n="days"===a?e.calcOffset(t):e.calcOffsetForWeeks(t),s="days"===a?t.duration:e.calcChartWidthForWeeks(t);e.isBefore(t)&&"days"===a?s-=Math.ceil(e.start.diff(k()(t.startDate,"YYYY/MM/DD").startOf("days"),"days",!0))+2:e.isBeforeForWeek(t)&&"weeks"===a?s-=Math.ceil(e.start.diff(k()(t.startDate,"YYYY/MM/DD"),"week",!0)):"days"===a&&(s+=1);var c=e.baseChartWidth*s,o="progress"===t.percentComplete?"task":"task--complete";return r.a.createElement("div",{key:t.name,style:{paddingLeft:n},className:o},r.a.createElement(Q,{chartWidth:c,data:t}))}))}}]),t}(n.Component),ae=function(e){return e.projects.map((function(t){return r.a.createElement("div",{key:t.name,className:"project"},r.a.createElement("div",{className:"projectHeader"}),t.tasks&&r.a.createElement(te,{tasks:t.tasks,scheduleType:e.scheduleType}))}))},ne=(a(131),C.dateRangeStart()),re=C.dateRangeEnd(),se=function(e,t){var a={};if("days"===t)a.formatDate=e.format("MMM D"),a.className="gantt-schedule-header__date".concat(function(e){switch(e.get("day")){case 0:return"--sun";case 6:return"--sat";default:return""}}(e));else{var n=e.startOf("week");a.formatDate="W".concat(e.format("W")," ").concat(n.format("M/D")),a.className="gantt-schedule-header__week"}return a},ce=function(e){for(var t=e.scheduleType,a=[],n=k()(ne);n<=re;n.add(1,t)){var s=se(n,t);a.push(r.a.createElement("div",{className:s.className,key:n.format("YYYYMMDD")},s.formatDate))}return a},oe=function(e){var t=e.scheduleType,a=e.onClick,n=e.resources,s={weeks:"switchView__button",days:"switchView__button"};return"weeks"===t?s.weeks+="--disable":"days"===t&&(s.days+="--disable"),r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"switchView"},r.a.createElement("div",{className:s.weeks,onClick:a,onKeyUp:a,"data-type":"weeks",role:"link",tabIndex:"0"},"Week"),r.a.createElement("div",{className:"switchView__divider"},"|"),r.a.createElement("div",{className:s.days,onClick:a,onKeyUp:a,"data-type":"days",role:"link",tabIndex:"0"},"Day")),r.a.createElement("div",{className:"resource"},n.map((function(e){return r.a.createElement("div",{key:e.id,className:"resource__wrapper"},r.a.createElement("div",{className:"resource__icon",style:{backgroundColor:e.color}}),r.a.createElement("div",{className:"resource__name"},e.name))}))))},ie=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).getProjectIndex=function(){var e=C.buildRequestUrl("/projects"),t=localStorage.getItem("token");fetch(e,{method:"GET",headers:{"X-Reach-token":t}}).then((function(e){return e.json()})).then((function(e){var t=e.is_authenticated,n=e.projects,r=e.resources;t&&a.setState({projects:n,resources:r})})).catch((function(){}))},a.changeScheduleType=function(e){var t=e.target.dataset.type;a.setState({type:t})},a.changeMode=function(){var e=a.state.destroyMode;a.setState({destroyMode:!e})},a.updateProject=function(e){return a.setState({projects:e})},a.refreshProject=function(e){var t=a.state.projects.slice();t.push(e),a.updateProject(t)},a.refreshTask=function(e,t,n){var r=a.state.projects;if("new"===n){var s=r.slice();s[t].tasks.push(e),a.updateProject(s)}else if("edit"===n){var c=r[t].tasks.map((function(t){return t.id===e.id?e:t})),o=r.map((function(e,a){var n=e;return t===a&&(n.tasks=c),n}));a.updateProject(o)}else if("destroy"===n){var i=r[t].tasks.filter((function(t){return t.id!==e.id})),l=r.map((function(e,a){var n=e;return t===a&&(n.tasks=i),n}));a.updateProject(l)}},a.state={resources:[],projects:[],type:"weeks",destroyMode:!1},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getProjectIndex()}},{key:"render",value:function(){var e=this.state,t=e.type,a=e.projects,n=e.resources,s=e.destroyMode;return r.a.createElement("div",{className:"App"},r.a.createElement(D,{getProjectIndex:this.getProjectIndex,refreshProject:this.refreshProject,changeMode:this.changeMode}),r.a.createElement("div",{className:"mainContainer"},r.a.createElement(oe,{resources:n,scheduleType:t,onClick:this.changeScheduleType}),r.a.createElement("div",{className:"gantt"},r.a.createElement("div",{className:"gantt-index"},r.a.createElement(T,{resources:n,projects:a,updateProject:this.updateProject}),r.a.createElement(z,{refreshTask:this.refreshTask,projects:a,mode:s})),r.a.createElement("div",{className:"gantt-schedule"},r.a.createElement("div",{className:"gantt-schedule-header"},r.a.createElement(ce,{scheduleType:t})),r.a.createElement(ae,{projects:a,scheduleType:t})))))}}]),t}(n.PureComponent),le=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).handleSignIn=function(){var e=a.state,t=e.email,n=e.password,r=C.buildRequestUrl("/sessions"),s={email:t,password:n};fetch(r,{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=e.token,r=e.errors;t?(localStorage.setItem("token",n),a.setState({isSignIn:!0})):a.setState({errors:r})})).catch((function(){}))},a.emailOnChange=function(e){var t=e.target.value;a.setState({email:t})},a.passwordOnChange=function(e){var t=e.target.value;a.setState({password:t})},a.state={email:"",password:"",isSignIn:!1,errors:[]},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.isSignIn,s=e.errors;return n?r.a.createElement(f.a,{to:"/"}):r.a.createElement("div",{className:"background"},r.a.createElement("div",{className:"session"},r.a.createElement("div",{className:"session__title"},"Sign in to Reach"),0!==s.length&&r.a.createElement(N,{action:"Authentication",errors:s}),r.a.createElement("input",{type:"text",className:"session__email",placeholder:"Email",value:t,onChange:this.emailOnChange}),r.a.createElement("input",{type:"password",className:"session__password",placeholder:"Password",value:a,onChange:this.passwordOnChange}),r.a.createElement("button",{type:"button",onClick:this.handleSignIn,className:"session__submit"},"Sign In"),r.a.createElement(g.b,{to:"/signup",className:"session__switch"},"Create account")))}}]),t}(n.Component),de=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).handleSignUp=function(){var e=a.state,t=e.avatar,n=e.name,r=e.email,s=e.password,c=e.passwordConfirmation,o=new FormData;o.append("user[name]",n),o.append("user[email]",r),o.append("user[password]",s),o.append("user[password_confirmation]",c),t&&o.append("user[avatar]",t);var i=C.buildRequestUrl("/users");fetch(i,{method:"POST",body:o}).then((function(e){return e.json()})).then((function(e){e.is_created?(localStorage.setItem("token",e.token),a.setState({isSignIn:!0})):a.setState({errors:e.errors})})).catch((function(){}))},a.onChangeFile=function(e){var t=e.target.files[0],n=URL.createObjectURL(t);a.setState({uri:n,avatar:t})},a.onChangeName=function(e){var t=e.target.value;a.setState({name:t})},a.onChangeEmail=function(e){var t=e.target.value;a.setState({email:t})},a.onChangePassword=function(e){var t=e.target.value;a.setState({password:t})},a.onChangePasswordConfirmation=function(e){var t=e.target.value;a.setState({passwordConfirmation:t})},a.state={uri:"",avatar:null,name:"",email:"",password:"",passwordConfirmation:"",errors:[],isSignIn:!1},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state,t=e.uri,a=e.name,n=e.email,s=e.password,c=e.passwordConfirmation,o=e.errors;return e.isSignIn?r.a.createElement(f.a,{to:"/"}):r.a.createElement("div",{className:"background"},r.a.createElement("div",{className:"session"},r.a.createElement("div",{className:"session__title"},"Create account"),0!==o.length&&r.a.createElement(N,{action:"Registration",errors:o}),r.a.createElement("label",{htmlFor:"avatarForm",className:"session__avatar"},r.a.createElement("input",{id:"avatarForm",type:"file",className:"session__fileField",onChange:this.onChangeFile}),""===t?r.a.createElement(_.a,{icon:["fas","user"],className:"session__fileIcon"}):r.a.createElement("img",{src:t,alt:"avatar",className:"session__preview"})),r.a.createElement("div",{className:"session__fileLabel"},"Upload your avatar"),r.a.createElement("input",{type:"text",className:"session__name",placeholder:"Name",value:a,onChange:this.onChangeName}),r.a.createElement("input",{type:"text",className:"session__email",placeholder:"Email",value:n,onChange:this.onChangeEmail}),r.a.createElement("input",{type:"password",className:"session__password",placeholder:"Password",value:s,onChange:this.onChangePassword}),r.a.createElement("input",{type:"password",className:"session__password",placeholder:"Password confirmation",value:c,onChange:this.onChangePasswordConfirmation}),r.a.createElement("button",{type:"button",onClick:this.handleSignUp,className:"session__submit"},"Sign Up"),r.a.createElement(g.b,{to:"/signin",className:"session__switch"},"Move to Sign In")))}}]),t}(n.Component),ue=function(e){function t(e){var a;Object(u.a)(this,t),a=Object(h.a)(this,Object(p.a)(t).call(this,e));var n=null!==localStorage.getItem("token");return a.state={isAuthenticated:n},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return this.state.isAuthenticated?r.a.createElement(ie,null):r.a.createElement(f.a,{to:"/signin"})}}]),t}(n.Component),me=function(){return r.a.createElement(g.a,null,r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/signin"},r.a.createElement(le,null)),r.a.createElement(f.b,{path:"/signup"},r.a.createElement(de,null)),r.a.createElement(f.b,{exact:!0,path:"/"},r.a.createElement(ue,null)),r.a.createElement(f.b,{exact:!0},r.a.createElement(le,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.b.add(i.a,l.a,d.a),c.a.render(r.a.createElement(me,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},47:function(e,t,a){},59:function(e,t,a){},62:function(e,t,a){},69:function(e,t,a){e.exports=a(132)},74:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){}},[[69,1,2]]]);
//# sourceMappingURL=main.9f2180c2.chunk.js.map