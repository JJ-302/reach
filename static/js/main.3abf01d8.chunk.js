(this.webpackJsonpreach=this.webpackJsonpreach||[]).push([[0],{129:function(e,a,t){},130:function(e,a,t){},131:function(e,a,t){},132:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(36),c=t.n(s),o=(t(74),t(35)),i=t(63),l=t(64),d=t(65),u=t(5),m=t(6),h=t(8),p=t(7),v=t(9),f=t(25),g=t(26),E=t(14),k=t.n(E),_=t(15),C=function(){function e(){Object(u.a)(this,e)}return Object(m.a)(e,null,[{key:"buildRequestUrl",value:function(e){return"http://localhost:3001"+e}},{key:"preparingRequest",value:function(e,a){switch(e){case"new":return{uriPattern:"/tasks",method:"POST"};case"edit":return{uriPattern:"/tasks/".concat(a),method:"PUT"};default:return null}}},{key:"dateRangeStart",value:function(){return k()(new Date).subtract(2,"weeks").startOf("days")}},{key:"dateRangeEnd",value:function(){return k()("2020/4/1","YYYY/MM/DD")}}]),e}(),b=(t(81),function(e){return e.errors.map((function(e){return r.a.createElement("div",{className:"error__message",key:e.error},e.error)}))}),N=function(e){var a=e.action,t=e.errors,n="".concat(a," failed!");return r.a.createElement("div",{className:"error"},r.a.createElement("div",{className:"error__title"},n),r.a.createElement(b,{errors:t}))},y=(t(59),function(e){function a(e){var t;return Object(u.a)(this,a),(t=Object(h.a)(this,Object(p.a)(a).call(this,e))).handleCreate=function(){var e=t.state,a=e.name,n=e.description,r=C.buildRequestUrl("/projects"),s=localStorage.getItem("token"),c={name:a,description:n};fetch(r,{method:"POST",headers:{"Content-Type":"application/json","X-Reach-token":s},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){var a=e.is_created,n=e.errors,r=e.project;if(a){var s=t.props,c=s.closeModal;(0,s.refresh)(r),c()}else t.setState({errors:n})})).catch((function(){}))},t.onChangeName=function(e){var a=e.target.value;t.setState({name:a})},t.onChangeDescription=function(e){var a=e.target.value;t.setState({description:a})},t.onClickOverlay=function(e){e.stopPropagation()},t.state={name:"",description:"",errors:[]},t}return Object(v.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e=this.props,a=e.closeModal,t=e.action,n=this.state,s=n.name,c=n.description,o=n.errors;return r.a.createElement("div",{className:"modalOverlay",onClick:a},r.a.createElement("div",{className:"modalForm",onClick:this.onClickOverlay},r.a.createElement("div",{className:"modalForm__title"},t,"Project"),0!==o.length&&r.a.createElement(N,{action:"Project creation",errors:o}),r.a.createElement("input",{type:"text",className:"modalForm__textInput",placeholder:"Type a project name",value:s,onChange:this.onChangeName}),r.a.createElement("textarea",{className:"modalForm__textarea",placeholder:"Type a project description",value:c,onChange:this.onChangeDescription}),r.a.createElement("button",{type:"button",onClick:this.handleCreate,className:"modalForm__button"},t)))}}]),a}(n.PureComponent)),w=function(e){function a(e){var t;return Object(u.a)(this,a),(t=Object(h.a)(this,Object(p.a)(a).call(this,e))).getIndexColors=function(){var e=localStorage.getItem("token"),a=C.buildRequestUrl("/colors");fetch(a,{method:"GET",headers:{"X-Reach-token":e}}).then((function(e){return e.json()})).then((function(a){var n=a.is_authenticated,r=a.colors;n&&t.setState({colors:r,token:e})})).catch((function(){}))},t.handleCreate=function(){var e=t.props.closeModal,a=t.state,n=a.pickedColor,r=a.token,s={name:a.name,color_id:n},c=C.buildRequestUrl("/resources");fetch(c,{method:"POST",headers:{"Content-Type":"application/json","X-Reach-token":r},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(a){var n=a.errors;a.is_created?e():t.setState({errors:n})})).catch((function(){}))},t.onPickColor=function(e){var a=e.target.dataset.color;t.setState({pickedColor:a})},t.onChangeName=function(e){var a=e.target.value;t.setState({name:a})},t.onClickOverlay=function(e){e.stopPropagation()},t.state={name:"",token:"",colors:[],pickedColor:"",errors:[]},t}return Object(v.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getIndexColors()}},{key:"render",value:function(){var e=this.props,a=e.closeModal,t=e.action,n=this.state,s=n.name,c=n.colors,o=n.pickedColor,i=n.errors;return r.a.createElement("div",{className:"modalOverlay",onClick:a},r.a.createElement("div",{className:"modalForm",onClick:this.onClickOverlay},r.a.createElement("div",{className:"modalForm__title"},t,"Resource"),0!==i.length&&r.a.createElement(N,{action:"Resource creation",errors:i}),r.a.createElement("input",{type:"text",className:"modalForm__textInput",placeholder:"Type a resource name",value:s,onChange:this.onChangeName}),r.a.createElement("div",{className:"modalForm__label"},"Chart color"),r.a.createElement("div",{className:"colorPallet"},r.a.createElement(S,{colors:c,pickedColor:o,onPickColor:this.onPickColor})),r.a.createElement("button",{type:"button",onClick:this.handleCreate,className:"modalForm__button"},t)))}}]),a}(n.PureComponent),S=function(e){var a=e.colors,t=e.pickedColor,n=e.onPickColor;return a.map((function(e){var a=t===String(e.id)?"--selected":"",s="colorPallet__body".concat(a);return r.a.createElement("div",{key:e.id,className:"colorPallet__edge"},r.a.createElement("div",{className:s,style:{backgroundColor:e.value},"data-color":e.id,onClick:n}))}))},D=(t(47),function(e){function a(e){var t;return Object(u.a)(this,a),(t=Object(h.a)(this,Object(p.a)(a).call(this,e))).getCurrentAccount=function(){var e=C.buildRequestUrl("/users/edit");fetch(e,{method:"GET",headers:{"X-Reach-token":t.token}}).then((function(e){return e.json()})).then((function(e){var a=e.is_authenticated,n=e.user;if(a){var r=n.avatar,s=n.name,c=n.email;t.avatar=r,t.name=s,t.email=c,t.setState({uri:r,name:s,email:c})}})).catch((function(){}))},t.handleUpdate=function(){var e=t.state,a=e.avatar,n=e.name,r=e.email,s=new FormData;s.append("user[name]",n),s.append("user[email]",r),a&&s.append("user[avatar]",a);var c=C.buildRequestUrl("/users/update");fetch(c,{method:"PATCH",headers:{"X-Reach-token":t.token},body:s}).then((function(e){return e.json()})).then((function(e){var a=e.is_updated,n=e.errors;a?(0,t.props.refresh)():t.setState({errors:n})})).catch((function(){}))},t.onChangeFile=function(e){var a=e.target.files[0],n=URL.createObjectURL(a);t.setState({uri:n,avatar:a})},t.onChangeName=function(e){var a=e.target.value;t.setState({name:a})},t.onChangeEmail=function(e){var a=e.target.value;t.setState({email:a})},t.closeEditAccount=function(){(0,t.props.closeEditAccount)()},t.onClickOverlay=function(e){return e.stopPropagation()},t.state={uri:"",avatar:null,name:"",email:"",errors:[]},t}return Object(v.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){this.token=localStorage.getItem("token"),this.getCurrentAccount()}},{key:"render",value:function(){var e=this.state,a=e.uri,t=e.name,n=e.email,s=e.errors;return r.a.createElement("div",{className:"background--edit",onClick:this.closeEditAccount},r.a.createElement("div",{className:"session",onClick:this.onClickOverlay},r.a.createElement("div",{className:"session__title"},"Edit account"),0!==s.length&&r.a.createElement(N,{action:"Registration",errors:s}),r.a.createElement("label",{htmlFor:"avatarForm",className:"session__avatar"},r.a.createElement("input",{id:"avatarForm",type:"file",className:"session__fileField",onChange:this.onChangeFile}),""===a?r.a.createElement(_.a,{icon:["fas","user"],className:"session__fileIcon"}):r.a.createElement("img",{src:a,alt:"avatar",className:"session__preview"})),r.a.createElement("div",{className:"session__fileLabel"},"Upload your avatar"),r.a.createElement("input",{type:"text",className:"session__name",placeholder:"Name",value:t,onChange:this.onChangeName}),r.a.createElement("input",{type:"text",className:"session__email",placeholder:"Email",value:n,onChange:this.onChangeEmail}),r.a.createElement("button",{type:"button",onClick:this.handleUpdate,className:"session__submit"},"Update")))}}]),a}(n.Component)),j=(t(82),function(e){function a(e){var t;return Object(u.a)(this,a),(t=Object(h.a)(this,Object(p.a)(a).call(this,e))).openProjectForm=function(){return t.setState({projectFormVisible:!0})},t.closeProjectForm=function(){return t.setState({projectFormVisible:!1})},t.openResourceForm=function(){return t.setState({resourceFormVisible:!0})},t.closeResourceForm=function(){return t.setState({resourceFormVisible:!1})},t.openEditAccount=function(){return t.setState({editAccuountVisible:!0})},t.closeEditAccount=function(){return t.setState({editAccuountVisible:!1})},t.toggleAccountMenu=function(){var e=t.state.accountMenuVisible;t.setState({accountMenuVisible:!e})},t.changeMode=function(){(0,t.props.changeMode)()},t.signOut=function(){localStorage.removeItem("token"),t.setState({isSignOut:!0})},t.state={projectFormVisible:!1,resourceFormVisible:!1,accountMenuVisible:!1,editAccuountVisible:!1,isSignOut:!1},t}return Object(v.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e=this.props,a=e.refreshProject,t=e.getProjectIndex,n=this.state,s=n.projectFormVisible,c=n.resourceFormVisible,o=n.accountMenuVisible,i=n.editAccuountVisible;return n.isSignOut?r.a.createElement(f.a,{to:"/signin"}):r.a.createElement("div",{className:"sidebar"},r.a.createElement("div",{className:"sidebar__iconWrapper--plus",onClick:this.openProjectForm},r.a.createElement(_.a,{icon:["fas","plus"],className:"sidebar__icon"})),r.a.createElement("div",{className:"sidebar__iconWrapper--minus",onClick:this.changeMode},r.a.createElement(_.a,{icon:["fas","minus"],className:"sidebar__icon"})),r.a.createElement("div",{className:"sidebar__iconWrapper--resource",onClick:this.openResourceForm},r.a.createElement(_.a,{icon:["fas","tags"],className:"sidebar__icon"})),r.a.createElement("div",{className:"sidebar__iconWrapper--account",onClick:this.toggleAccountMenu},r.a.createElement(_.a,{icon:["fas","user"],className:"sidebar__icon"})),o&&r.a.createElement("div",{className:"overlay",onClick:this.toggleAccountMenu},r.a.createElement("div",{className:"accountMenu"},r.a.createElement("div",{className:"accountMenu__edit",onClick:this.openEditAccount},"Edit account"),r.a.createElement("div",{className:"accountMenu__signout",onClick:this.signOut},"Sign out"))),s&&r.a.createElement(y,{action:"Create",refresh:a,closeModal:this.closeProjectForm}),c&&r.a.createElement(w,{action:"Create",closeModal:this.closeResourceForm}),i&&r.a.createElement(D,{refresh:t,closeEditAccount:this.closeEditAccount}))}}]),a}(n.PureComponent)),O=t(4),x=t.n(O),R=t(13),F=t(32),M=t.n(F),T=(t(61),-1),P=function(e){function a(e){var t;return Object(u.a)(this,a),(t=Object(h.a)(this,Object(p.a)(a).call(this,e))).getUserIndex=function(){var e=C.buildRequestUrl("/users");fetch(e,{method:"GET",headers:{"X-Reach-token":t.token}}).then((function(e){return e.json()})).then((function(e){var a=e.users;e.is_authenticated&&t.setState({users:a})})).catch((function(){}))},t.search=function(){var e=t.state,a=e.projectId,n=e.taskName,r=e.startDateFrom,s=e.startDateTo,c=e.endDateFrom,o=e.endDateTo,i=e.extendFrom,l=e.extendTo,d=e.orderDuration,u=e.orderStartDate,m=e.orderEndDate,h=e.orderExtend,p=e.inCharge,v=e.selectedResources,f=C.buildRequestUrl("/tasks/search"),g={project_id:a,task_name:n,start_date:{from:r,to:s,order:u},end_date:{from:c,to:o,order:m},extend:{from:i,to:l,order:h},duration:{order:d},in_charge:p,resources:v};fetch(f,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)}).then((function(e){return e.json()})).then((function(e){var a=e.projects;(0,t.props.updateProject)(a)})).catch((function(){}))},t.sortingByDateRange=function(e){var a=t.state,n=a.startDateFrom,r=a.startDateTo,s=a.endDateFrom,c=a.endDateTo,o=a.extendFrom,i=a.extendTo,l=a.orderStartDate,d=a.orderEndDate,u=a.orderExtend;switch(e){case"start":return{rangeStart:n,rangeEnd:r,onChangeRangeStart:t.onChangeStartDateRangeS,onChangeRangeEnd:t.onChangeStartDateRangeE,order:l};case"end":return{rangeStart:s,rangeEnd:c,onChangeRangeStart:t.onChangeEndDateRangeS,onChangeRangeEnd:t.onChangeEndDateRangeE,order:d};case"extend":return{rangeStart:o,rangeEnd:i,onChangeRangeStart:t.onChangeExtendRangeS,onChangeRangeEnd:t.onChangeExtendRangeE,order:u};default:return{}}},t.onClickResource=function(){var e=t.state.searchByResourceVisible;t.setState({searchByResourceVisible:!e})},t.onClickName=function(){var e=t.state.searchByNameVisible;t.setState({searchByNameVisible:!e})},t.onClickDate=function(e){var a=e.currentTarget.dataset.type,n=t.state.searchByDateVisible;t.setState({searchByDateVisible:!n,dateType:a})},t.onClickDuration=function(){var e=t.state.searchByDurationVisible;t.setState({searchByDurationVisible:!e})},t.onClickInCharge=function(){var e=t.state.searchByUsersVisible;t.setState({searchByUsersVisible:!e})},t.onChangeOrder=function(){var e=Object(R.a)(x.a.mark((function e(a){var n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.currentTarget.dataset.by,r=a.target.value,e.t0=n,e.next="duration"===e.t0?5:"start"===e.t0?8:"end"===e.t0?11:"extend"===e.t0?14:17;break;case 5:return e.next=7,t.setState({orderDuration:r,orderStartDate:"",orderEndDate:"",orderExtend:""});case 7:return e.abrupt("break",17);case 8:return e.next=10,t.setState({orderDuration:"",orderStartDate:r,orderEndDate:"",orderExtend:""});case 10:return e.abrupt("break",17);case 11:return e.next=13,t.setState({orderDuration:"",orderStartDate:"",orderEndDate:r,orderExtend:""});case 13:return e.abrupt("break",17);case 14:return e.next=16,t.setState({orderDuration:"",orderStartDate:"",orderEndDate:"",orderExtend:r});case 16:return e.abrupt("break",17);case 17:t.search();case 18:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),t.onChangeProject=function(){var e=Object(R.a)(x.a.mark((function e(a){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.target.value,e.next=3,t.setState({projectId:n});case 3:t.search();case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),t.onChangeTask=function(){var e=Object(R.a)(x.a.mark((function e(a){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.target.value,e.next=3,t.setState({taskName:n});case 3:t.search();case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),t.onChangeStartDateRangeS=function(){var e=Object(R.a)(x.a.mark((function e(a){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({startDateFrom:a});case 2:t.search();case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),t.onChangeStartDateRangeE=function(){var e=Object(R.a)(x.a.mark((function e(a){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({startDateTo:a});case 2:t.search();case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),t.onChangeEndDateRangeS=function(){var e=Object(R.a)(x.a.mark((function e(a){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({endDateFrom:a});case 2:t.search();case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),t.onChangeEndDateRangeE=function(){var e=Object(R.a)(x.a.mark((function e(a){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.setState({endDateTo:a}),t.search();case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),t.onChangeExtendRangeS=function(){var e=Object(R.a)(x.a.mark((function e(a){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({extendFrom:a});case 2:t.search();case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),t.onChangeExtendRangeE=function(){var e=Object(R.a)(x.a.mark((function e(a){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({extendTo:a});case 2:t.search();case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),t.onClickAvatar=function(){var e=Object(R.a)(x.a.mark((function e(a){var n,r,s,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state.inCharge,r=n,s=a.currentTarget.dataset.id,(c=n.indexOf(s))===T?r.push(s):r.splice(c,1),e.next=7,t.setState({inCharge:r});case 7:t.search();case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),t.onClickResourceIcon=function(){var e=Object(R.a)(x.a.mark((function e(a){var n,r,s,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state.selectedResources,r=n,s=a.currentTarget.dataset.id,(c=n.indexOf(s))===T?r.push(s):r.splice(c,1),e.next=7,t.setState({selectedResources:r});case 7:t.search();case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),t.clearSearchName=Object(R.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({taskName:"",projectId:"",searchByNameVisible:!1});case 2:t.search();case 3:case"end":return e.stop()}}),e)}))),t.clearSearchStartDate=Object(R.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({startDateFrom:"",startDateTo:"",orderStartDate:"",searchByDateVisible:!1});case 2:t.search();case 3:case"end":return e.stop()}}),e)}))),t.clearSearchEndDate=Object(R.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({endDateFrom:"",endDateTo:"",orderEndDate:"",searchByDateVisible:!1});case 2:t.search();case 3:case"end":return e.stop()}}),e)}))),t.clearSearchExtend=Object(R.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({extendFrom:"",extendTo:"",orderExtend:"",searchByDateVisible:!1});case 2:t.search();case 3:case"end":return e.stop()}}),e)}))),t.clearSearchDuration=Object(R.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({orderDuration:"",searchByDurationVisible:!1});case 2:t.search();case 3:case"end":return e.stop()}}),e)}))),t.clearSearchInCharge=Object(R.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({inCharge:[],searchByUsersVisible:!1});case 2:t.search();case 3:case"end":return e.stop()}}),e)}))),t.closeAllModal=function(){t.setState({searchByNameVisible:!1,searchByDateVisible:!1,searchByDurationVisible:!1,searchByUsersVisible:!1,searchByResourceVisible:!1})},t.stopPropagation=function(e){return e.stopPropagation()},t.token=localStorage.getItem("token"),t.state={users:[],searchByNameVisible:!1,searchByDateVisible:!1,searchByDurationVisible:!1,searchByUsersVisible:!1,searchByResourceVisible:!1,dateType:"",projectId:"",taskName:"",startDateFrom:"",startDateTo:"",endDateFrom:"",endDateTo:"",extendFrom:"",extendTo:"",orderDuration:"",orderStartDate:"",orderEndDate:"",orderExtend:"",inCharge:[],selectedResources:[]},t}return Object(v.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getUserIndex()}},{key:"render",value:function(){var e=this.props,a=e.projects,t=e.resources,n=this.state,s=n.users,c=n.searchByNameVisible,o=n.searchByDateVisible,i=n.searchByDurationVisible,l=n.searchByUsersVisible,d=n.searchByResourceVisible,u=n.projectId,m=n.taskName,h=n.dateType,p=n.startDateFrom,v=n.startDateTo,f=n.endDateFrom,g=n.endDateTo,E=n.extendFrom,k=n.extendTo,_=n.orderStartDate,C=n.orderEndDate,b=n.orderExtend,N=n.orderDuration,y=n.inCharge,w=n.selectedResources,S=0===w.length?"resourceIcon":"resourceIcon--selected",D=this.sortingByDateRange(h),j=D.rangeStart,O=D.rangeEnd,x=D.onChangeRangeStart,R=D.onChangeRangeEnd,F=D.order;return r.a.createElement("div",{className:"gantt-index-header"},r.a.createElement("div",{className:"gantt-index-header__resource"},r.a.createElement("div",{className:S,onClick:this.onClickResource})),r.a.createElement("div",{className:"gantt-index-header__name"},""===u&&""===m?r.a.createElement("span",{className:"gantt-index-header__label",onClick:this.onClickName},"Name"):r.a.createElement("div",{className:"selected"},r.a.createElement("span",{className:"selected__label",onClick:this.onClickName},"Name"),r.a.createElement("span",{className:"selected__clear",onClick:this.clearSearchName},"\xd7"))),r.a.createElement("div",{className:"gantt-index-header__startDate"},""===p&&""===v&&""===_?r.a.createElement("span",{className:"gantt-index-header__label","data-type":"start",onClick:this.onClickDate},"StartDate"):r.a.createElement("div",{className:"selected"},r.a.createElement("span",{className:"selected__label","data-type":"start",onClick:this.onClickDate},"StartDate"),r.a.createElement("span",{className:"selected__clear",onClick:this.clearSearchStartDate},"\xd7"))),r.a.createElement("div",{className:"gantt-index-header__endDate"},""===f&&""===g&&""===C?r.a.createElement("span",{className:"gantt-index-header__label","data-type":"end",onClick:this.onClickDate},"EndDate"):r.a.createElement("div",{className:"selected"},r.a.createElement("span",{className:"selected__label","data-type":"end",onClick:this.onClickDate},"EndDate"),r.a.createElement("span",{className:"selected__clear",onClick:this.clearSearchEndDate},"\xd7"))),r.a.createElement("div",{className:"gantt-index-header__extend"},""===E&&""===k&&""===b?r.a.createElement("span",{className:"gantt-index-header__label","data-type":"extend",onClick:this.onClickDate},"Extend"):r.a.createElement("div",{className:"selected"},r.a.createElement("span",{className:"selected__label","data-type":"extend",onClick:this.onClickDate},"Extend"),r.a.createElement("span",{className:"selected__clear",onClick:this.clearSearchExtend},"\xd7"))),r.a.createElement("div",{className:"gantt-index-header__duration"},""===N?r.a.createElement("span",{className:"gantt-index-header__label",onClick:this.onClickDuration},"Duration"):r.a.createElement("div",{className:"selected"},r.a.createElement("span",{className:"selected__label",onClick:this.onClickDuration},"Duration"),r.a.createElement("span",{className:"selected__clear",onClick:this.clearSearchDuration},"\xd7"))),r.a.createElement("div",{className:"gantt-index-header__inCharge"},0===y.length?r.a.createElement("span",{className:"gantt-index-header__label",onClick:this.onClickInCharge},"InCharge"):r.a.createElement("div",{className:"selected"},r.a.createElement("span",{className:"selected__label",onClick:this.onClickInCharge},"InCharge"),r.a.createElement("span",{className:"selected__clear",onClick:this.clearSearchInCharge},"\xd7"))),d&&r.a.createElement("div",{className:"overlay",onClick:this.closeAllModal},r.a.createElement(X,{resources:t,selectedResources:w,onClickResource:this.onClickResourceIcon,stopPropagation:this.stopPropagation})),c&&r.a.createElement("div",{className:"overlay",onClick:this.closeAllModal},r.a.createElement(A,{projectId:u,projects:a,onChangeProject:this.onChangeProject,taskName:m,onChangeTask:this.onChangeTask,stopPropagation:this.stopPropagation})),o&&r.a.createElement("div",{className:"overlay",onClick:this.closeAllModal},r.a.createElement(Y,{dateType:h,rangeStart:j,rangeEnd:O,onChangeRangeStart:x,onChangeRangeEnd:R,onChangeOrder:this.onChangeOrder,selected:F,stopPropagation:this.stopPropagation})),i&&r.a.createElement("div",{className:"overlay",onClick:this.closeAllModal},r.a.createElement(V,{onChangeOrder:this.onChangeOrder,selected:N,stopPropagation:this.stopPropagation})),l&&r.a.createElement("div",{className:"overlay",onClick:this.closeAllModal},r.a.createElement(U,{users:s,inCharge:y,onClickAvatar:this.onClickAvatar,stopPropagation:this.stopPropagation})))}}]),a}(n.Component),I=function(e){var a=e.onChangeOrder,t=e.by,n=e.selected;return r.a.createElement("select",{"data-by":t,value:n,onChange:a,className:"search__order"},r.a.createElement("option",{key:"default",value:null,"aria-label":"order"}),[{label:"ASC",value:"ASC"},{label:"DESC",value:"DESC"}].map((function(e){return r.a.createElement("option",{key:e.label,value:e.value},e.label)})))},V=function(e){var a=e.onChangeOrder,t=e.selected,n=e.stopPropagation;return r.a.createElement("div",{className:"search--duration",onClick:n},r.a.createElement("div",{className:"search__label"},"Order by duration"),r.a.createElement(I,{by:"duration",onChangeOrder:a,selected:t}),r.a.createElement("div",{className:"search__divide"}))},Y=function(e){var a=e.rangeStart,t=e.rangeEnd,n=e.onChangeRangeStart,s=e.onChangeRangeEnd,c=e.dateType,o=e.onChangeOrder,i=e.order,l=e.stopPropagation,d="search--".concat(c),u="Filter by ".concat(c," date");return r.a.createElement("div",{className:d,onClick:l},r.a.createElement("div",{className:"search__label"},"Order by duration"),r.a.createElement(I,{by:c,onChangeOrder:o,selected:i}),r.a.createElement("div",{className:"search__divide"}),r.a.createElement("div",{className:"search__label"},u),r.a.createElement("div",{className:"search__dateWrapper"},r.a.createElement(M.a,{className:"search__dateRange",dateFormat:"yyyy/MM/dd",showWeekNumbers:!0,placeholderText:"Select range start",selected:a,onChange:n}),r.a.createElement(M.a,{className:"search__dateRange",dateFormat:"yyyy/MM/dd",showWeekNumbers:!0,placeholderText:"Select range end",selected:t,onChange:s})))},A=function(e){var a=e.projectId,t=e.projects,n=e.onChangeProject,s=e.taskName,c=e.onChangeTask,o=e.stopPropagation;return r.a.createElement("div",{className:"search--name",onClick:o},r.a.createElement("div",{className:"search__label"},"Filter by Project"),r.a.createElement("select",{value:a,onChange:n,className:"search__project"},r.a.createElement("option",{key:"default",value:null,"aria-label":"selectProject"}),t.map((function(e){return r.a.createElement("option",{key:e.name,value:e.id},e.name)}))),r.a.createElement("div",{className:"search__divide"}),r.a.createElement("div",{className:"search__label"},"Search by Task name"),r.a.createElement("input",{type:"text",className:"search__task",value:s,onChange:c}))},B=function(e){var a=e.users,t=e.onClickAvatar,n=e.inCharge;return a.map((function(e){var a=n.indexOf(String(e.id));return r.a.createElement("div",{key:e.id,className:"avatar"},r.a.createElement("div",{"data-id":e.id,onClick:t,className:"avatar__wrapper"},r.a.createElement("img",{src:e.avatar,alt:e.name,className:"avatar__image"}),a!==T&&r.a.createElement("div",{className:"avatar__selected"})),r.a.createElement("div",{className:"avatar__name"},e.name))}))},U=function(e){var a=e.users,t=e.inCharge,n=e.onClickAvatar,s=e.stopPropagation;return r.a.createElement("div",{className:"search--user",onClick:s},r.a.createElement("div",{className:"search__label"},"Search by users"),r.a.createElement("div",{className:"search__usersWrapper"},r.a.createElement(B,{users:a,inCharge:t,onClickAvatar:n})))},W=function(e){var a=e.resources,t=e.selectedResources,n=e.onClickResource;return a.map((function(e){var a=t.indexOf(String(e.id));return r.a.createElement("div",{key:e.id,className:"resource"},r.a.createElement("div",{"data-id":e.id,onClick:n,className:"resource__wrapper"},r.a.createElement("div",{className:"resource__icon",style:{backgroundColor:e.color}}),a!==T&&r.a.createElement("div",{className:"resource__selected"})),r.a.createElement("div",{className:"resource__name"},e.name))}))},X=function(e){var a=e.resources,t=e.selectedResources,n=e.onClickResource,s=e.stopPropagation;return r.a.createElement("div",{className:"search--resource",onClick:s},r.a.createElement("div",{className:"search__label"},"Search by resource"),r.a.createElement("div",{className:"search__resourceWrapper"},r.a.createElement(W,{resources:a,selectedResources:t,onClickResource:n})))},q=(t(129),function(e){var a=e.members;return a.map((function(e,t){return t>3?null:t<3?r.a.createElement("img",{key:e.name,src:e.avatar,alt:e.name,className:"task__avatar"}):r.a.createElement("div",{key:String(t),className:"task__avatar--length"},a.length)}))}),L=function(e){function a(){var e,t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(h.a)(this,(e=Object(p.a)(a)).call.apply(e,[this].concat(r)))).handleDestroy=function(e){e.stopPropagation(),t.token=localStorage.getItem("token");var a=e.currentTarget.dataset.id,n=C.buildRequestUrl("/tasks/".concat(a));fetch(n,{method:"DELETE",headers:{"X-Reach-token":t.token}}).then((function(e){return e.json()})).then((function(e){var a=e.is_delete,n=e.task;if(a){var r=t.props,s=r.index;(0,r.refresh)(n,s,"destroy")}})).catch((function(){}))},t.onClickOverlay=function(e){e.stopPropagation()},t}return Object(v.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e=this,a=this.props,t=a.tasks,n=a.onClick,s=a.destroyMode;return t.map((function(a){return r.a.createElement("div",{key:a.id,"data-action":"edit","data-id":a.id,className:"task",onClick:n},r.a.createElement("div",{className:"task__icon",onClick:e.onClickOverlay},s?r.a.createElement(_.a,{"data-id":a.id,icon:["fas","minus-circle"],className:"task__delete",onClick:e.handleDestroy}):r.a.createElement("div",{className:"task__resource",style:{backgroundColor:a.resource.color}})),r.a.createElement("div",{className:"task__name"},a.name),r.a.createElement("div",{className:"task__startDate"},a.startDate),r.a.createElement("div",{className:"task__endDate"},a.endDate),r.a.createElement("div",{className:"task__extend"},a.extend),r.a.createElement("div",{className:"task__duration"},a.duration),r.a.createElement("div",{className:"task__inCharge"},r.a.createElement(q,{members:a.users})))}))}}]),a}(n.Component),H=-1,J=function(e){function a(e){var t;return Object(u.a)(this,a),(t=Object(h.a)(this,Object(p.a)(a).call(this,e))).getTaskFormValue=function(){t.token=localStorage.getItem("token");var e=C.buildRequestUrl("/tasks/new");fetch(e,{method:"GET",headers:{"X-Reach-token":t.token}}).then((function(e){return e.json()})).then((function(e){var a=e.is_authenticated,n=e.resources,r=e.users;a&&t.setState({resources:n,users:r})})).catch((function(){}))},t.editTaskFormValue=function(e){t.token=localStorage.getItem("token");var a=C.buildRequestUrl("/tasks/".concat(e,"/edit"));fetch(a,{method:"GET",headers:{"X-Reach-token":t.token}}).then((function(e){return e.json()})).then((function(e){var a=e.is_authenticated,n=e.resources,r=e.users;if(a){var s=e.task,c=s.description,o=s.startDate,i=s.endDate,l=s.extend,d=s.name,u=s.userIds,m=s.resourceId,h=u.map((function(e){return String(e)}));t.setState({resources:n,users:r,name:d,description:c,startDate:new Date(o),endDate:l?new Date(l):new Date(i),inCharge:h,resource:m})}})).catch((function(){}))},t.onChangeName=function(e){var a=e.target.value;t.setState({name:a})},t.onChangeResource=function(e){var a=e.target.value;t.setState({resource:a})},t.onChangeStartDate=function(e){t.setState({startDate:e})},t.onChangeEndDate=function(e){t.setState({endDate:e})},t.onClickAvatar=function(e){var a=t.state.inCharge,n=a,r=e.currentTarget.dataset.id,s=a.indexOf(r);s===H?n.push(r):n.splice(s,1),t.setState({inCharge:n})},t.onChangeDescription=function(e){var a=e.target.value;t.setState({description:a})},t.createTask=function(){var e=t.props,a=e.id,n=e.taskID,r=e.action,s=t.state,c=s.name,o=s.resource,i=s.startDate,l=s.endDate,d=s.inCharge,u=s.description,m=C.preparingRequest(r,n);if(null!==m){var h=C.buildRequestUrl(m.uriPattern),p={name:c,description:u,duration:k()(l).diff(k()(i),"days"),resource_id:o,project_id:a,start_date:i,end_date:l,user_ids:d};"edit"===r&&(p.extend=l,delete p.end_date),fetch(h,{method:m.method,headers:{"X-Reach-token":t.token,"Content-Type":"application/json"},body:JSON.stringify(p)}).then((function(e){return e.json()})).then((function(e){var a=e.is_created,n=e.errors,s=e.task;if(a){var c=t.props;(0,c.refresh)(s,c.index,r),t.setState({errors:[]})}else t.setState({errors:n})})).catch((function(){}))}},t.state={resources:[],users:[],name:"",resource:"",startDate:null,endDate:null,inCharge:[],description:"",errors:[]},t}return Object(v.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,a=e.taskID,t=e.action;"new"===t?this.getTaskFormValue():"edit"===t&&this.editTaskFormValue(a)}},{key:"render",value:function(){var e=this.props,a=e.closeModal,t="edit"===e.action?"Update":"Add",n=this.state,s=n.users,c=n.resources,o=n.resource,i=n.name,l=n.startDate,d=n.endDate,u=n.inCharge,m=n.description,h=n.errors;return r.a.createElement("div",{className:"taskForm"},r.a.createElement("div",{className:"taskForm__close",onClick:a},"\xd7"),r.a.createElement("div",{className:"taskForm__title"},t,"Task"),0!==h.length&&r.a.createElement(N,{action:"Task creation",errors:h}),r.a.createElement("div",{className:"taskFormRow"},r.a.createElement("div",{className:"taskFormRow__label"},"Name"),r.a.createElement("input",{type:"text",className:"taskFormRow__name",value:i,onChange:this.onChangeName})),r.a.createElement("div",{className:"taskFormRow"},r.a.createElement("div",{className:"taskFormRow__label"},"Resource"),r.a.createElement("select",{value:o,onChange:this.onChangeResource,className:"taskFormRow__resource"},r.a.createElement("option",{key:"default",value:null,"aria-label":"...select"}),r.a.createElement(G,{resources:c})),r.a.createElement("div",{className:"taskFormRow__divide"})),r.a.createElement("div",{className:"taskFormRow"},r.a.createElement("div",{className:"taskFormRow__label"},"Start date"),r.a.createElement(M.a,{className:"taskFormRow__date",dateFormat:"yyyy/MM/dd",showWeekNumbers:!0,selected:l,onChange:this.onChangeStartDate})),r.a.createElement("div",{className:"taskFormRow"},r.a.createElement("div",{className:"taskFormRow__label"},"End date"),r.a.createElement(M.a,{className:"taskFormRow__date",dateFormat:"yyyy/MM/dd",showWeekNumbers:!0,selected:d,onChange:this.onChangeEndDate})),r.a.createElement("div",{className:"taskFormRow"},r.a.createElement("div",{className:"taskFormRow__label"},"In charge"),r.a.createElement("div",{className:"taskFormRow__inCharge"},r.a.createElement(K,{users:s,inCharge:u,onClickAvatar:this.onClickAvatar}))),r.a.createElement("div",{className:"taskFormRow"},r.a.createElement("div",{className:"taskFormRow__label"},"Description"),r.a.createElement("textarea",{className:"taskFormRow__description",value:m,onChange:this.onChangeDescription})),r.a.createElement("button",{type:"button",onClick:this.createTask,className:"taskForm__button"},t))}}]),a}(n.Component),G=function(e){return e.resources.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))},K=function(e){var a=e.users,t=e.onClickAvatar,n=e.inCharge;return a.map((function(e){var a=n.indexOf(String(e.id));return r.a.createElement("div",{key:e.id,className:"avatar"},r.a.createElement("div",{"data-id":e.id,onClick:t,className:"avatar__wrapper"},r.a.createElement("img",{src:e.avatar,alt:e.name,className:"avatar__image"}),a!==H&&r.a.createElement("div",{className:"avatar__selected"})),r.a.createElement("div",{className:"avatar__name"},e.name))}))},$=(t(62),function(e){function a(e){var t;return Object(u.a)(this,a),(t=Object(h.a)(this,Object(p.a)(a).call(this,e))).openModal=function(e){t.id=e.currentTarget.dataset.id||null,t.action=e.currentTarget.dataset.action,t.setState({isVisible:!0})},t.closeModal=function(){t.setState({isVisible:!1})},t.state={isVisible:!1},t}return Object(v.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e=this.props,a=e.project,t=e.index,n=e.refreshTask,s=e.destroyMode,c=a.tasks,o=a.name,i=a.id,l=this.state.isVisible;return r.a.createElement("div",{key:o,className:"project"},r.a.createElement("div",{className:"projectHeader"},r.a.createElement("div",{className:"projectHeader__name"},o),r.a.createElement(_.a,{icon:["fas","plus"],"data-action":"new",className:"projectHeader__addTask",onClick:this.openModal})),c&&r.a.createElement(L,{destroyMode:s,index:t,refresh:n,tasks:c,onClick:this.openModal}),l&&r.a.createElement(J,{id:i,action:this.action,taskID:this.id,refresh:n,index:t,closeModal:this.closeModal}))}}]),a}(n.Component)),z=function(e){var a=e.projects,t=e.refreshTask,n=e.mode;return a.map((function(e,a){return r.a.createElement($,{refreshTask:t,project:e,key:e.name,index:a,destroyMode:n})}))},Q=(t(130),function(e){function a(e){var t;return Object(u.a)(this,a),(t=Object(h.a)(this,Object(p.a)(a).call(this,e))).onMouseEnter=function(e){var a=window.innerWidth<e.clientX+300,n=window.innerHeight<e.clientY+300,r=a?e.clientX-280:e.clientX+30,s=n?e.clientY-150:e.clientY;t.setState({isHover:!0,offsetX:r,offsetY:s})},t.onMouseLeave=function(){t.setState({isHover:!1})},t.state={isHover:!1,offsetX:0,offsetY:0},t}return Object(v.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e=this.props,a=e.chartWidth,t=e.data,n=this.state,s=n.isHover,c=n.offsetX,o=n.offsetY;return r.a.createElement("div",{style:{width:a,backgroundColor:t.resource.color},className:"chartbar",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},s&&r.a.createElement(ee,{data:t,offsetX:c,offsetY:o}))}}]),a}(n.PureComponent)),Z=function(e){return e.users.map((function(e){return r.a.createElement("div",{key:e.name,className:"windowMembers__name"},e.name)}))},ee=function(e){var a=e.data,t=e.offsetX,n=e.offsetY;return r.a.createElement("div",{className:"window",style:{top:n,left:t}},r.a.createElement("div",{className:"windowRow"},r.a.createElement("div",{className:"windowRow__label"},"Name:"),r.a.createElement("div",{className:"windowRow__name"},a.name)),r.a.createElement("div",{className:"windowRow"},r.a.createElement("div",{className:"windowRow__label"},"StartDate:"),r.a.createElement("div",{className:"window__startDate"},a.startDate)),r.a.createElement("div",{className:"windowRow"},r.a.createElement("div",{className:"windowRow__label"},"EndDate:"),r.a.createElement("div",{className:"window__endDate"},a.endDate)),r.a.createElement("div",{className:"windowRow"},r.a.createElement("div",{className:"windowRow__label"},"Extend:"),r.a.createElement("div",{className:"window__extend"},a.extend)),r.a.createElement("div",{className:"windowRow"},r.a.createElement("div",{className:"windowRow__label"},"Duration:"),r.a.createElement("div",{className:"window__duration"},a.duration)),r.a.createElement("div",{className:"windowRow"},r.a.createElement("div",{className:"windowRow__label"},"InCharge:"),r.a.createElement("div",{className:"windowMembers"},r.a.createElement(Z,{users:a.users}))),r.a.createElement("div",{className:"windowCol"},r.a.createElement("div",{className:"windowCol__label"},"Description:"),r.a.createElement("div",{className:"windowCol__description"},a.description)))},ae=function(e){function a(e){var t;return Object(u.a)(this,a),(t=Object(h.a)(this,Object(p.a)(a).call(this,e))).calcOffset=function(e){return(k()(e.startDate,"YYYY/MM/DD").startOf("days").diff(t.start,"days")-1)*t.baseChartWidth},t.calcOffsetForWeeks=function(e){return Math.ceil(k()(e.startDate,"YYYY/MM/DD").startOf("week").diff(t.start,"weeks",!0))*t.baseChartWidth},t.calcChartWidthForWeeks=function(e){var a=e.extend||e.endDate,t=k()(e.startDate,"YYYY/MM/DD").startOf("week"),n=k()(a,"YYYY/MM/DD").endOf("week");return Math.ceil(n.diff(t,"weeks",!0))},t.isBefore=function(e){return k()(e.startDate,"YYYY/MM/DD").isSameOrBefore(t.start)},t.isBeforeForWeek=function(e){return k()(e.startDate,"YYYY/MM/DD").isBefore(t.start.startOf("week"))},t.start=C.dateRangeStart(),t.baseChartWidth=45,t}return Object(v.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e=this,a=this.props,t=a.scheduleType;return a.tasks.map((function(a){var n="days"===t?e.calcOffset(a):e.calcOffsetForWeeks(a),s="days"===t?a.duration:e.calcChartWidthForWeeks(a);e.isBefore(a)&&"days"===t?s-=Math.ceil(e.start.diff(k()(a.startDate,"YYYY/MM/DD").startOf("days"),"days",!0)):e.isBeforeForWeek(a)&&"weeks"===t?s-=Math.ceil(e.start.diff(k()(a.startDate,"YYYY/MM/DD"),"week",!0)):"days"===t&&(s+=1);var c=e.baseChartWidth*s;return r.a.createElement("div",{key:a.name,style:{paddingLeft:n},className:"task"},r.a.createElement(Q,{chartWidth:c,data:a}))}))}}]),a}(n.Component),te=function(e){return e.projects.map((function(a){return r.a.createElement("div",{key:a.name,className:"project"},r.a.createElement("div",{className:"projectHeader"}),a.tasks&&r.a.createElement(ae,{tasks:a.tasks,scheduleType:e.scheduleType}))}))},ne=(t(131),C.dateRangeStart()),re=C.dateRangeEnd(),se=function(e,a){var t={};if("days"===a)t.formatDate=e.format("MMM D"),t.className="gantt-schedule-header__date".concat(function(e){switch(e.get("day")){case 0:return"--sun";case 6:return"--sat";default:return""}}(e));else{var n=e.startOf("week");t.formatDate="W".concat(e.format("W")," ").concat(n.format("M/D")),t.className="gantt-schedule-header__week"}return t},ce=function(e){for(var a=e.scheduleType,t=[],n=k()(ne);n<=re;n.add(1,a)){var s=se(n,a);t.push(r.a.createElement("div",{className:s.className,key:n.format("YYYYMMDD")},s.formatDate))}return t},oe=function(e){var a=e.scheduleType,t=e.onClick,n=e.resources,s={weeks:"switchView__button",days:"switchView__button"};return"weeks"===a?s.weeks+="--disable":"days"===a&&(s.days+="--disable"),r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"switchView"},r.a.createElement("div",{className:s.weeks,onClick:t,onKeyUp:t,"data-type":"weeks",role:"link",tabIndex:"0"},"Week"),r.a.createElement("div",{className:"switchView__divider"},"|"),r.a.createElement("div",{className:s.days,onClick:t,onKeyUp:t,"data-type":"days",role:"link",tabIndex:"0"},"Day")),r.a.createElement("div",{className:"resource"},n.map((function(e){return r.a.createElement("div",{key:e.id,className:"resource__wrapper"},r.a.createElement("div",{className:"resource__icon",style:{backgroundColor:e.color}}),r.a.createElement("div",{className:"resource__name"},e.name))}))))},ie=function(e){function a(e){var t;return Object(u.a)(this,a),(t=Object(h.a)(this,Object(p.a)(a).call(this,e))).getProjectIndex=function(){var e=C.buildRequestUrl("/projects"),a=localStorage.getItem("token");fetch(e,{method:"GET",headers:{"X-Reach-token":a}}).then((function(e){return e.json()})).then((function(e){var a=e.is_authenticated,n=e.projects,r=e.resources;a&&t.setState({projects:n,resources:r})})).catch((function(){}))},t.changeScheduleType=function(e){var a=e.target.dataset.type;t.setState({type:a})},t.changeMode=function(){var e=t.state.destroyMode;t.setState({destroyMode:!e})},t.updateProject=function(e){return t.setState({projects:e})},t.refreshProject=function(e){var a=t.state.projects.slice();a.push(e),t.updateProject(a)},t.refreshTask=function(e,a,n){var r=t.state.projects;if("new"===n){var s=r.slice();s[a].tasks.push(e),t.updateProject(s)}else if("edit"===n){var c=r[a].tasks.map((function(a){return a.id===e.id?e:a})),o=r.map((function(e,t){var n=e;return a===t&&(n.tasks=c),n}));t.updateProject(o)}else if("destroy"===n){var i=r[a].tasks.filter((function(a){return a.id!==e.id})),l=r.map((function(e,t){var n=e;return a===t&&(n.tasks=i),n}));t.updateProject(l)}},t.state={resources:[],projects:[],type:"weeks",destroyMode:!1},t}return Object(v.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getProjectIndex()}},{key:"render",value:function(){var e=this.state,a=e.type,t=e.projects,n=e.resources,s=e.destroyMode;return r.a.createElement("div",{className:"App"},r.a.createElement(j,{getProjectIndex:this.getProjectIndex,refreshProject:this.refreshProject,changeMode:this.changeMode}),r.a.createElement("div",{className:"mainContainer"},r.a.createElement(oe,{resources:n,scheduleType:a,onClick:this.changeScheduleType}),r.a.createElement("div",{className:"gantt"},r.a.createElement("div",{className:"gantt-index"},r.a.createElement(P,{resources:n,projects:t,updateProject:this.updateProject}),r.a.createElement(z,{refreshTask:this.refreshTask,projects:t,mode:s})),r.a.createElement("div",{className:"gantt-schedule"},r.a.createElement("div",{className:"gantt-schedule-header"},r.a.createElement(ce,{scheduleType:a})),r.a.createElement(te,{projects:t,scheduleType:a})))))}}]),a}(n.PureComponent),le=function(e){function a(e){var t;return Object(u.a)(this,a),(t=Object(h.a)(this,Object(p.a)(a).call(this,e))).handleSignIn=function(){var e=t.state,a=e.email,n=e.password,r=C.buildRequestUrl("/sessions"),s={email:a,password:n};fetch(r,{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var a=e.result,n=e.token,r=e.errors;a?(localStorage.setItem("token",n),t.setState({isSignIn:!0})):t.setState({errors:r})})).catch((function(){}))},t.emailOnChange=function(e){var a=e.target.value;t.setState({email:a})},t.passwordOnChange=function(e){var a=e.target.value;t.setState({password:a})},t.state={email:"",password:"",isSignIn:!1,errors:[]},t}return Object(v.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e=this.state,a=e.email,t=e.password,n=e.isSignIn,s=e.errors;return n?r.a.createElement(f.a,{to:"/"}):r.a.createElement("div",{className:"background"},r.a.createElement("div",{className:"session"},r.a.createElement("div",{className:"session__title"},"Sign in to Reach"),0!==s.length&&r.a.createElement(N,{action:"Authentication",errors:s}),r.a.createElement("input",{type:"text",className:"session__email",placeholder:"Email",value:a,onChange:this.emailOnChange}),r.a.createElement("input",{type:"password",className:"session__password",placeholder:"Password",value:t,onChange:this.passwordOnChange}),r.a.createElement("button",{type:"button",onClick:this.handleSignIn,className:"session__submit"},"Sign In"),r.a.createElement(g.b,{to:"/signup",className:"session__switch"},"Create account")))}}]),a}(n.Component),de=function(e){function a(e){var t;return Object(u.a)(this,a),(t=Object(h.a)(this,Object(p.a)(a).call(this,e))).handleSignUp=function(){var e=t.state,a=e.avatar,n=e.name,r=e.email,s=e.password,c=e.passwordConfirmation,o=new FormData;o.append("user[name]",n),o.append("user[email]",r),o.append("user[password]",s),o.append("user[password_confirmation]",c),a&&o.append("user[avatar]",a);var i=C.buildRequestUrl("/users");fetch(i,{method:"POST",body:o}).then((function(e){return e.json()})).then((function(e){e.is_created?(localStorage.setItem("token",e.token),t.setState({isSignIn:!0})):t.setState({errors:e.errors})})).catch((function(){}))},t.onChangeFile=function(e){var a=e.target.files[0],n=URL.createObjectURL(a);t.setState({uri:n,avatar:a})},t.onChangeName=function(e){var a=e.target.value;t.setState({name:a})},t.onChangeEmail=function(e){var a=e.target.value;t.setState({email:a})},t.onChangePassword=function(e){var a=e.target.value;t.setState({password:a})},t.onChangePasswordConfirmation=function(e){var a=e.target.value;t.setState({passwordConfirmation:a})},t.state={uri:"",avatar:null,name:"",email:"",password:"",passwordConfirmation:"",errors:[],isSignIn:!1},t}return Object(v.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e=this.state,a=e.uri,t=e.name,n=e.email,s=e.password,c=e.passwordConfirmation,o=e.errors;return e.isSignIn?r.a.createElement(f.a,{to:"/"}):r.a.createElement("div",{className:"background"},r.a.createElement("div",{className:"session"},r.a.createElement("div",{className:"session__title"},"Create account"),0!==o.length&&r.a.createElement(N,{action:"Registration",errors:o}),r.a.createElement("label",{htmlFor:"avatarForm",className:"session__avatar"},r.a.createElement("input",{id:"avatarForm",type:"file",className:"session__fileField",onChange:this.onChangeFile}),""===a?r.a.createElement(_.a,{icon:["fas","user"],className:"session__fileIcon"}):r.a.createElement("img",{src:a,alt:"avatar",className:"session__preview"})),r.a.createElement("div",{className:"session__fileLabel"},"Upload your avatar"),r.a.createElement("input",{type:"text",className:"session__name",placeholder:"Name",value:t,onChange:this.onChangeName}),r.a.createElement("input",{type:"text",className:"session__email",placeholder:"Email",value:n,onChange:this.onChangeEmail}),r.a.createElement("input",{type:"password",className:"session__password",placeholder:"Password",value:s,onChange:this.onChangePassword}),r.a.createElement("input",{type:"password",className:"session__password",placeholder:"Password confirmation",value:c,onChange:this.onChangePasswordConfirmation}),r.a.createElement("button",{type:"button",onClick:this.handleSignUp,className:"session__submit"},"Sign Up"),r.a.createElement(g.b,{to:"/signin",className:"session__switch"},"Move to Sign In")))}}]),a}(n.Component),ue=function(e){function a(e){var t;Object(u.a)(this,a),t=Object(h.a)(this,Object(p.a)(a).call(this,e));var n=null!==localStorage.getItem("token");return t.state={isAuthenticated:n},t}return Object(v.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return this.state.isAuthenticated?r.a.createElement(ie,null):r.a.createElement(f.a,{to:"/signin"})}}]),a}(n.Component),me=function(){return r.a.createElement(g.a,null,r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/signin"},r.a.createElement(le,null)),r.a.createElement(f.b,{path:"/signup"},r.a.createElement(de,null)),r.a.createElement(f.b,{exact:!0,path:"/"},r.a.createElement(ue,null)),r.a.createElement(f.b,{exact:!0},r.a.createElement(le,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.b.add(i.a,l.a,d.a),c.a.render(r.a.createElement(me,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},47:function(e,a,t){},59:function(e,a,t){},62:function(e,a,t){},69:function(e,a,t){e.exports=t(132)},74:function(e,a,t){},81:function(e,a,t){},82:function(e,a,t){}},[[69,1,2]]]);
//# sourceMappingURL=main.3abf01d8.chunk.js.map